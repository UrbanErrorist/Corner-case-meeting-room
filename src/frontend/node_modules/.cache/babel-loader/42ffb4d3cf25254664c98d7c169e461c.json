{"ast":null,"code":"var _jsxFileName = \"/Users/blackhat/Desktop/testingRoom/src/frontend/src/components/customer/bookings.component.jsx\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Title from '../title.component';\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport { FormHelperText, ListItemText, Paper } from \"@material-ui/core\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Grid from \"@material-ui/core/Grid\";\nimport axios from \"axios\";\nimport { reactLocalStorage } from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport ProfileModal from \"../profile/profile-modal.component\";\nconst useStyles = makeStyles(_ => ({\n  listPaper: {\n    width: '100%',\n    padding: '0 2%'\n  },\n  roomTitle: {\n    float: 'left',\n    margin: '11px 10px'\n  },\n  roomName: {\n    float: 'left',\n    marginRight: '10%'\n  },\n  delRoom: {\n    float: 'right',\n    margin: '44px 0px 0 ',\n    transform: 'translateY(-50%)',\n    cursor: 'pointer'\n  }\n}));\n\nfunction formatTime(s) {\n  let n = parseInt(s.split(':')[0]),\n      ampm = ' AM';\n\n  if (n > 12) {\n    n -= 12;\n    ampm = ' PM';\n  }\n\n  return n + ':' + s.split(':')[1] + ampm;\n}\n\nfunction RowComponent(props) {\n  const classes = useStyles();\n\n  const handleDel = e => {\n    e.preventDefault();\n    axios.delete(baseUrl + '/bookings/' + props.booking.id, {\n      headers: {\n        'Authorization': 'token ' + reactLocalStorage.get('token')\n      }\n    }).then(_ => {\n      props.setDel(!props.del);\n    });\n  };\n\n  const deletable = s => {\n    s = s.replace('-', '').replace('-', '');\n    let sn = parseInt(s),\n        d = new Date(),\n        now;\n    now = parseInt(pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2));\n    return sn >= now;\n  };\n\n  return React.createElement(ListItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.listPaper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(ListItemText, {\n    className: classes.roomName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: '5px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, props.booking.time_slot.room_id.name), React.createElement(FormHelperText, {\n    style: {\n      margin: '2px',\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Room\"))), React.createElement(ListItemText, {\n    className: classes.roomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: '5px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, props.booking.date))), React.createElement(ListItemText, {\n    className: classes.roomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: '5px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, formatTime(props.booking.time_slot.time_from)))), React.createElement(Box, {\n    color: \"text.secondary\",\n    className: classes.roomTitle,\n    style: {\n      marginTop: '19px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"to\")), React.createElement(ListItemText, {\n    className: classes.roomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: '5px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, formatTime(props.booking.time_slot.time_to)))), !props.roomManager && deletable(props.booking.date) && React.createElement(IconButton, {\n    className: classes.delRoom,\n    onClick: handleDel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(DeleteIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), props.roomManager && React.createElement(ProfileModal, {\n    customer: true,\n    name: props.booking.customer.first_name + ' ' + props.booking.customer.last_name,\n    username: props.booking.customer.username,\n    email: props.booking.customer.email,\n    imgLink: \"https://material-ui.com/static/images/cards/contemplative-reptile.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), props.customer && React.createElement(ProfileModal, {\n    roomManager: true,\n    name: props.booking.time_slot.room_id.owner.first_name + ' ' + props.booking.time_slot.room_id.owner.last_name,\n    username: props.booking.time_slot.room_id.owner.username,\n    email: props.booking.time_slot.room_id.owner.email,\n    imgLink: \"https://material-ui.com/static/images/cards/contemplative-reptile.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })));\n}\n\nfunction pad(num, size) {\n  let s = num + \"\";\n\n  while (s.length < size) s = \"0\" + s;\n\n  return s;\n}\n\nfunction dateOk(s, curr) {\n  s = s.replace('-', '').replace('-', '');\n  let sn = parseInt(s),\n      d = new Date(),\n      now;\n  now = parseInt(pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2));\n  console.log(sn, now);\n  if (curr === 'upcoming') return sn > now;else if (curr === 'past') return sn < now;else if (curr === 'today') return sn === now;else if (curr === 'all') return true;\n}\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\nexport default function Bookings(props) {\n  let c = 0;\n\n  for (let i in props.rows) if (dateOk(props.rows[i].date, props.curr)) c++;\n\n  let title;\n  if (props.curr === 'upcoming') title = 'Upcoming Bookings';else if (props.curr === 'past') title = 'Past Bookings';else if (props.curr === 'today') title = 'Today\\'s Bookings';else if (props.curr === 'new') title = 'New Booking';else if (props.curr === 'all') title = 'All Bookings';\n  const rows = props.rows;\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, title), React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, rows.map(row => {\n    if (dateOk(row.date, props.curr)) return React.createElement(RowComponent, {\n      roomManager: props.roomManager,\n      customer: props.customer,\n      curr: props.curr,\n      key: row.id,\n      booking: row,\n      setDel: props.setDel,\n      del: props.del,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    });\n    return null;\n  }), !c && React.createElement(Typography, {\n    color: \"textSecondary\",\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"No bookings to display!\")));\n}","map":{"version":3,"sources":["/Users/blackhat/Desktop/testingRoom/src/frontend/src/components/customer/bookings.component.jsx"],"names":["React","makeStyles","Title","List","ListItem","FormHelperText","ListItemText","Paper","DeleteIcon","Grid","axios","reactLocalStorage","Typography","IconButton","Box","ProfileModal","useStyles","_","listPaper","width","padding","roomTitle","float","margin","roomName","marginRight","delRoom","transform","cursor","formatTime","s","n","parseInt","split","ampm","RowComponent","props","classes","handleDel","e","preventDefault","delete","baseUrl","booking","id","headers","get","then","setDel","del","deletable","replace","sn","d","Date","now","pad","getFullYear","getMonth","getDate","textAlign","marginBottom","time_slot","room_id","name","date","time_from","marginTop","time_to","roomManager","customer","first_name","last_name","username","email","owner","num","size","length","dateOk","curr","console","log","process","env","REACT_APP_HOST_BASE_URL","Bookings","c","i","rows","title","map","row"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Title from '../title.component';\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport {FormHelperText, ListItemText, Paper} from \"@material-ui/core\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Grid from \"@material-ui/core/Grid\";\nimport axios from \"axios\";\nimport {reactLocalStorage} from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport ProfileModal from \"../profile/profile-modal.component\";\n\nconst useStyles = makeStyles(_ => ({\n    listPaper: {\n        width: '100%',\n        padding: '0 2%'\n    },\n    roomTitle: {\n        float: 'left',\n        margin: '11px 10px'\n    },\n    roomName: {\n        float: 'left',\n        marginRight: '10%'\n    },\n    delRoom: {\n        float: 'right',\n        margin: '44px 0px 0 ',\n        transform: 'translateY(-50%)',\n        cursor: 'pointer'\n    },\n}));\n\nfunction formatTime(s) {\n    let n = parseInt(s.split(':')[0]), ampm = ' AM';\n    if (n > 12) {\n        n -= 12;\n        ampm = ' PM';\n    }\n    return n + ':' + s.split(':')[1] + ampm;\n}\n\nfunction RowComponent(props) {\n    const classes = useStyles();\n\n    const handleDel = (e) => {\n        e.preventDefault();\n        axios.delete(baseUrl + '/bookings/' + props.booking.id, {headers: {'Authorization': 'token ' + reactLocalStorage.get('token')}}).then((_) => {\n            props.setDel(!props.del);\n        })\n    };\n\n    const deletable = (s) => {\n        s = s.replace('-', '').replace('-', '');\n        let sn = parseInt(s), d = new Date(), now;\n        now = parseInt(pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2));\n\n        return sn >= now;\n    };\n\n    return (\n        <ListItem>\n            <Paper className={classes.listPaper}>\n                <ListItemText className={classes.roomName}>\n                    <Grid style={{textAlign: 'center'}}>\n                        <h3 style={{marginBottom: '5px'}}>{props.booking.time_slot.room_id.name}</h3>\n                        <FormHelperText style={{margin: '2px', textAlign: 'center'}}>Room</FormHelperText>\n                    </Grid>\n                </ListItemText>\n                <ListItemText className={classes.roomTitle}>\n                    <Grid style={{textAlign: 'center'}}>\n                        <h3 style={{marginBottom: '5px'}}>{(props.booking.date)}</h3>\n                    </Grid>\n                </ListItemText>\n                <ListItemText className={classes.roomTitle}>\n                    <Grid style={{textAlign: 'center'}}>\n                        <h3 style={{marginBottom: '5px'}}>{formatTime(props.booking.time_slot.time_from)}</h3>\n                    </Grid>\n                </ListItemText>\n                <Box color=\"text.secondary\" className={classes.roomTitle} style={{marginTop: '19px'}}><h3>to</h3></Box>\n                <ListItemText className={classes.roomTitle}>\n                    <Grid style={{textAlign: 'center'}}>\n                        <h3 style={{marginBottom: '5px'}}>{formatTime(props.booking.time_slot.time_to)}</h3>\n                    </Grid>\n                </ListItemText>\n                {!props.roomManager && deletable(props.booking.date) &&\n                <IconButton className={classes.delRoom} onClick={handleDel}>\n                    <DeleteIcon/>\n                </IconButton>}\n                {props.roomManager &&\n                <ProfileModal customer name={props.booking.customer.first_name + ' ' + props.booking.customer.last_name}\n                              username={props.booking.customer.username} email={props.booking.customer.email}\n                              imgLink=\"https://material-ui.com/static/images/cards/contemplative-reptile.jpg\"/>}\n                {props.customer && <ProfileModal roomManager\n                                                 name={props.booking.time_slot.room_id.owner.first_name + ' ' + props.booking.time_slot.room_id.owner.last_name}\n                                                 username={props.booking.time_slot.room_id.owner.username}\n                                                 email={props.booking.time_slot.room_id.owner.email}\n                                                 imgLink=\"https://material-ui.com/static/images/cards/contemplative-reptile.jpg\"/>}\n            </Paper>\n        </ListItem>\n    )\n}\n\nfunction pad(num, size) {\n    let s = num + \"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n}\n\nfunction dateOk(s, curr) {\n    s = s.replace('-', '').replace('-', '');\n    let sn = parseInt(s), d = new Date(), now;\n    now = parseInt(pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2));\n    console.log(sn, now);\n\n    if (curr === 'upcoming')\n        return sn > now;\n    else if (curr === 'past')\n        return sn < now;\n    else if (curr === 'today')\n        return sn === now;\n    else if (curr === 'all')\n        return true;\n}\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nexport default function Bookings(props) {\n    let c = 0;\n    for (let i in props.rows)\n        if (dateOk(props.rows[i].date, props.curr))\n            c++;\n\n    let title;\n    if (props.curr === 'upcoming')\n        title = 'Upcoming Bookings';\n    else if (props.curr === 'past')\n        title = 'Past Bookings';\n    else if (props.curr === 'today')\n        title = 'Today\\'s Bookings';\n    else if (props.curr === 'new')\n        title = 'New Booking';\n    else if (props.curr === 'all')\n        title = 'All Bookings';\n    const rows = props.rows;\n    return (\n        <React.Fragment>\n            <Title>{title}</Title>\n\n            <List>\n                {rows.map(row => {\n                    if (dateOk(row.date, props.curr))\n                        return (\n                            <RowComponent roomManager={props.roomManager} customer={props.customer} curr={props.curr}\n                                          key={row.id} booking={row} setDel={props.setDel} del={props.del}/>)\n                    return null\n                })}\n                {!c &&\n                <Typography color=\"textSecondary\" style={{textAlign: 'center'}}>No bookings to display!</Typography>}\n            </List>\n\n\n        </React.Fragment>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}