{"ast":null,"code":"import _classCallCheck from\"/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import FormControlLabel from'@material-ui/core/FormControlLabel';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import{Radio}from\"@material-ui/core\";import RadioGroup from\"@material-ui/core/RadioGroup\";import validator from'validator';import FormHelperText from\"@material-ui/core/FormHelperText\";import axios from'axios';import*as qs from\"qs\";var useStyles=makeStyles(function(theme){return{paper:{position:'relative',top:'45vh',transform:'translateY(-50%)',display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2)}};});var baseUrl=\"\".concat(process.env.REACT_APP_HOST_BASE_URL);var Form=/*#__PURE__*/function(_React$Component){_inherits(Form,_React$Component);function Form(props){var _this;_classCallCheck(this,Form);_this=_possibleConstructorReturn(this,_getPrototypeOf(Form).call(this,props));_this.fnameChange=function(e){_this.setState({fname:e.target.value});if(!(e.target.value.toString().length>=3))_this.setState({validFname:false});else _this.setState({validFname:true});};_this.lnameChange=function(e){_this.setState({lname:e.target.value});if(!(e.target.value.toString().length>=3))_this.setState({validLname:false});else _this.setState({validLname:true});};_this.emailChange=function(e){_this.setState({email:e.target.value});if(!validator.isEmail(e.target.value))_this.setState({validEmail:false});else _this.setState({validEmail:true});};_this.pwdChange=function(e){_this.setState({pwd:e.target.value});if(!(e.target.value.toString().length>=8))_this.setState({validPwd:false});else _this.setState({validPwd:true});};_this.roleChange=function(e){_this.setState({role:e.target.value});if(!(e.target.value.toString().length>0))_this.setState({validRole:false});else _this.setState({validRole:true});};_this.usernameChange=function(e){_this.setState({username:e.target.value});if(!(e.target.value.toString().length>=5))_this.setState({validUsername:false});else _this.setState({validUsername:true});};_this.submit=function(e){e.preventDefault();// Fname\nif(!(_this.state.fname.toString().length>=3))_this.setState({validFname:false});else _this.setState({validFname:true});// Lname\nif(!(_this.state.lname.toString().length>=3))_this.setState({validLname:false});else _this.setState({validLname:true});// Username\nif(!(_this.state.username.toString().length>=5))_this.setState({validUsername:false});else _this.setState({validUsername:true});// Email\nif(!validator.isEmail(_this.state.email))_this.setState({validEmail:false});else _this.setState({validEmail:true});// Pwd\nif(!(_this.state.pwd.toString().length>=8))_this.setState({validPwd:false});else _this.setState({validPwd:true});// Role\nif(!(_this.state.role.toString().length>0))_this.setState({validRole:false});else _this.setState({validRole:true});if(_this.state.validFname&&_this.state.validLname&&_this.state.validUsername&&_this.state.validEmail&&_this.state.validPwd&&_this.state.validRole){var data={first_name:_this.state.fname,last_name:_this.state.lname,username:_this.state.username,email:_this.state.email,password:_this.state.pwd,is_customer:false,is_room_manager:false};if(_this.state.role===\"customer\")data.is_customer=true;if(_this.state.role===\"roomManager\")data.is_room_manager=true;var config={headers:{'Content-Type':'application/x-www-form-urlencoded'}};console.log(JSON.stringify(data));axios.post(baseUrl+'/signup',qs.stringify(data),config).then(function(res){console.log(res);_this.props.history.replace('/login');}).catch(function(error){if(!error.response){// network error\nconsole.log('Error: Network Error\\n'+error);}else{var err='';var _data=error.response.data;for(var d in _data){for(var i in _data[d]){err+=_data[d][i];}}_this.setState({errorText:err});}});}};_this.state={fname:\"\",lname:\"\",username:\"\",email:\"\",pwd:\"\",role:\"\",validFname:true,validLname:true,validUsername:true,validEmail:true,validPwd:true,validRole:false,errorText:''};return _this;}_createClass(Form,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"form\",{className:this.props.classes.form},React.createElement(Grid,{container:true,spacing:2},React.createElement(Grid,{item:true,xs:12,sm:6},React.createElement(TextField,{error:!this.state.validFname,autoComplete:\"fname\",name:\"firstName\",variant:\"outlined\",required:true,fullWidth:true,id:\"firstName\",label:\"First Name\",autoFocus:true,onChange:this.fnameChange})),React.createElement(Grid,{item:true,xs:12,sm:6},React.createElement(TextField,{error:!this.state.validLname,variant:\"outlined\",required:true,fullWidth:true,id:\"lastName\",label:\"Last Name\",name:\"lastName\",autoComplete:\"lname\",onChange:this.lnameChange})),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{error:!this.state.validUsername,variant:\"outlined\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",onChange:this.usernameChange})),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{error:!this.state.validEmail,variant:\"outlined\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",onChange:this.emailChange})),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{error:!this.state.validPwd,variant:\"outlined\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:this.pwdChange})),React.createElement(Grid,{item:true,xs:12},React.createElement(FormHelperText,null,\"Signup as* :\"),React.createElement(RadioGroup,{onChange:this.roleChange},React.createElement(FormControlLabel,{control:React.createElement(Radio,{value:\"roomManager\",color:\"primary\"}),label:\"Room Manager\",name:\"role\"}),React.createElement(FormControlLabel,{control:React.createElement(Radio,{value:\"customer\",color:\"primary\"}),label:\"Customer\",name:\"role\"}))),React.createElement(Grid,{item:true,xs:12},React.createElement(FormHelperText,{error:true},this.state.errorText),React.createElement(\"br\",null))),React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",className:this.props.classes.submit,onClick:this.submit},\"Signup\"),React.createElement(Grid,{container:true,justify:\"flex-end\"},React.createElement(Grid,{item:true},React.createElement(Link,{href:\"/login\",onClick:function onClick(e){e.preventDefault();_this2.props.history.push('/login');},variant:\"body2\"},\"Already have an account? Sign in\")))));}}]);return Form;}(React.Component);export default function SignupComponent(props){var classes=useStyles();return React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},React.createElement(CssBaseline,null),React.createElement(\"div\",{className:classes.paper},React.createElement(Avatar,{className:classes.avatar},React.createElement(LockOutlinedIcon,null)),React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Create Account\"),React.createElement(Form,{classes:classes,history:props.history})));}","map":{"version":3,"sources":["/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/signup/signup.component.jsx"],"names":["React","Avatar","Button","CssBaseline","TextField","FormControlLabel","Link","Grid","LockOutlinedIcon","Typography","makeStyles","Container","Radio","RadioGroup","validator","FormHelperText","axios","qs","useStyles","theme","paper","position","top","transform","display","flexDirection","alignItems","avatar","margin","spacing","backgroundColor","palette","secondary","main","form","width","marginTop","submit","baseUrl","process","env","REACT_APP_HOST_BASE_URL","Form","props","fnameChange","e","setState","fname","target","value","toString","length","validFname","lnameChange","lname","validLname","emailChange","email","isEmail","validEmail","pwdChange","pwd","validPwd","roleChange","role","validRole","usernameChange","username","validUsername","preventDefault","state","data","first_name","last_name","password","is_customer","is_room_manager","config","headers","console","log","JSON","stringify","post","then","res","history","replace","catch","error","response","err","d","i","errorText","classes","push","Component","SignupComponent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport {Radio} from \"@material-ui/core\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport validator from 'validator'\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport axios from 'axios'\nimport * as qs from \"qs\";\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        position: 'relative',\n        top: '45vh',\n        transform: 'translateY(-50%)',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(3),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nclass Form extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            fname: \"\",\n            lname: \"\",\n            username: \"\",\n            email: \"\",\n            pwd: \"\",\n            role: \"\",\n            validFname: true,\n            validLname: true,\n            validUsername: true,\n            validEmail: true,\n            validPwd: true,\n            validRole: false,\n            errorText: ''\n        }\n    }\n\n    fnameChange = (e) => {\n        this.setState({fname: e.target.value});\n        if (!(e.target.value.toString().length >= 3))\n            this.setState({validFname: false});\n        else\n            this.setState({validFname: true})\n    };\n\n    lnameChange = (e) => {\n        this.setState({lname: e.target.value});\n        if (!(e.target.value.toString().length >= 3))\n            this.setState({validLname: false});\n        else\n            this.setState({validLname: true})\n    };\n\n    emailChange = (e) => {\n        this.setState({email: e.target.value});\n        if (!validator.isEmail(e.target.value))\n            this.setState({validEmail: false});\n        else\n            this.setState({validEmail: true})\n    };\n\n    pwdChange = (e) => {\n        this.setState({pwd: e.target.value});\n        if (!(e.target.value.toString().length >= 8))\n            this.setState({validPwd: false});\n        else\n            this.setState({validPwd: true})\n    };\n\n    roleChange = (e) => {\n        this.setState({role: e.target.value});\n        if (!(e.target.value.toString().length > 0))\n            this.setState({validRole: false});\n        else\n            this.setState({validRole: true})\n    };\n\n    usernameChange = (e) => {\n        this.setState({username: e.target.value});\n        if (!(e.target.value.toString().length >= 5))\n            this.setState({validUsername: false});\n        else\n            this.setState({validUsername: true})\n    };\n\n    submit = (e) => {\n        e.preventDefault();\n        // Fname\n        if (!(this.state.fname.toString().length >= 3))\n            this.setState({validFname: false});\n        else\n            this.setState({validFname: true});\n\n        // Lname\n        if (!(this.state.lname.toString().length >= 3))\n            this.setState({validLname: false});\n        else\n            this.setState({validLname: true});\n\n        // Username\n        if (!(this.state.username.toString().length >= 5))\n            this.setState({validUsername: false});\n        else\n            this.setState({validUsername: true});\n\n        // Email\n        if (!validator.isEmail(this.state.email))\n            this.setState({validEmail: false});\n        else\n            this.setState({validEmail: true});\n\n        // Pwd\n        if (!(this.state.pwd.toString().length >= 8))\n            this.setState({validPwd: false});\n        else\n            this.setState({validPwd: true});\n\n        // Role\n        if (!(this.state.role.toString().length > 0))\n            this.setState({validRole: false});\n        else\n            this.setState({validRole: true});\n\n        if (this.state.validFname && this.state.validLname && this.state.validUsername && this.state.validEmail && this.state.validPwd && this.state.validRole) {\n            let data = {\n                first_name: this.state.fname,\n                last_name: this.state.lname,\n                username: this.state.username,\n                email: this.state.email,\n                password: this.state.pwd,\n                is_customer: false,\n                is_room_manager: false\n            };\n            if (this.state.role === \"customer\")\n                data.is_customer = true;\n            if (this.state.role === \"roomManager\")\n                data.is_room_manager = true;\n            const config = {\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                }\n            };\n            console.log(JSON.stringify(data));\n            axios.post(baseUrl + '/signup', qs.stringify(data), config).then(res => {\n                console.log(res);\n                this.props.history.replace('/login');\n            }).catch(error => {\n                if (!error.response) {\n                    // network error\n                    console.log('Error: Network Error\\n' + error);\n                } else {\n                    let err = '';\n                    let data = error.response.data;\n                    for (let d in data)\n                        for (let i in data[d])\n                            err += data[d][i];\n                    this.setState({errorText: err})\n                }\n            })\n        }\n    };\n\n    render() {\n        return (\n            <div>\n                <form className={this.props.classes.form}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={12} sm={6}>\n                            <TextField\n                                error={!this.state.validFname}\n                                autoComplete=\"fname\"\n                                name=\"firstName\"\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"firstName\"\n                                label=\"First Name\"\n                                autoFocus\n                                onChange={this.fnameChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12} sm={6}>\n                            <TextField\n                                error={!this.state.validLname}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"lastName\"\n                                label=\"Last Name\"\n                                name=\"lastName\"\n                                autoComplete=\"lname\"\n                                onChange={this.lnameChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validUsername}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"username\"\n                                label=\"Username\"\n                                name=\"username\"\n                                autoComplete=\"username\"\n                                onChange={this.usernameChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validEmail}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"email\"\n                                label=\"Email Address\"\n                                name=\"email\"\n                                autoComplete=\"email\"\n                                onChange={this.emailChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validPwd}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                name=\"password\"\n                                label=\"Password\"\n                                type=\"password\"\n                                id=\"password\"\n                                autoComplete=\"current-password\"\n                                onChange={this.pwdChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <FormHelperText>\n                                Signup as* :\n                            </FormHelperText>\n                            <RadioGroup onChange={this.roleChange}>\n                                <FormControlLabel\n                                    control={<Radio value=\"roomManager\" color=\"primary\"/>}\n                                    label=\"Room Manager\"\n                                    name=\"role\"\n                                />\n                                <FormControlLabel\n                                    control={<Radio value=\"customer\" color=\"primary\"/>}\n                                    label=\"Customer\"\n                                    name=\"role\"\n                                />\n                            </RadioGroup>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <FormHelperText error>{this.state.errorText}</FormHelperText><br/>\n                        </Grid>\n                    </Grid>\n                    <Button\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={this.props.classes.submit}\n                        onClick={this.submit}\n                    >\n                        Signup\n                    </Button>\n                    <Grid container justify=\"flex-end\">\n                        <Grid item>\n                            <Link href={\"/login\"} onClick={(e)=>{e.preventDefault(); this.props.history.push('/login')}} variant=\"body2\">\n                                Already have an account? Sign in\n                            </Link>\n                        </Grid>\n                    </Grid>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default function SignupComponent(props) {\n    const classes = useStyles();\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Create Account\n                </Typography>\n                <Form classes={classes} history={props.history}/>\n            </div>\n        </Container>\n    );\n}"]},"metadata":{},"sourceType":"module"}