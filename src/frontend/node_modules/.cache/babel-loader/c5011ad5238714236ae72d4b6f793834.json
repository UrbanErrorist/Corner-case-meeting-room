{"ast":null,"code":"import _slicedToArray from\"/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import DateFnsUtils from\"@date-io/date-fns\";import{KeyboardDatePicker,MuiPickersUtilsProvider}from\"@material-ui/pickers\";import CssBaseline from\"@material-ui/core/CssBaseline\";import Container from\"@material-ui/core/Container\";import{makeStyles}from\"@material-ui/core/styles\";import{FormHelperText,ListItemText,Paper}from\"@material-ui/core\";import Title from\"../../title.component\";import axios from\"axios\";import{reactLocalStorage}from\"reactjs-localstorage\";import Typography from\"@material-ui/core/Typography\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import Grid from\"@material-ui/core/Grid\";import BookModalComponent from\"./book-modal.component\";import Box from\"@material-ui/core/Box\";var useStyles=makeStyles(function(theme){return{root:{display:'flex',marginLeft:theme.spacing(7)},appBarSpacer:theme.mixins.toolbar,content:{flexGrow:1,height:'100vh',overflow:'auto'},container:{paddingTop:theme.spacing(4),paddingBottom:theme.spacing(4),textAlign:'center'},paper:{padding:theme.spacing(2),display:'flex',overflow:'auto',flexDirection:'column',textAlign:'left'},fixedHeight:{height:240},addBtn:{position:'fixed',right:'3%',bottom:'3%',height:'70px',width:'70px'},listPaper:{width:'100%',padding:'0 2%'},delRoom:{float:'right',margin:'44px 0px 0 ',transform:'translateY(-50%)',cursor:'pointer'}};});var baseUrl=\"\".concat(process.env.REACT_APP_HOST_BASE_URL);function RowComponent(props){var classes=useStyles();return React.createElement(ListItem,null,React.createElement(Paper,{className:classes.listPaper},React.createElement(ListItemText,{className:classes.roomName},React.createElement(Grid,{style:{float:'left'}},React.createElement(\"h3\",{style:{marginBottom:'5px'}},props.rooms.name),React.createElement(FormHelperText,{style:{margin:'2px'}},\"Room\"))),React.createElement(BookModalComponent,{rows:props.rooms,date:props.date,del:props.del,setDel:props.setDel})));}export default function Book(props){var classes=useStyles();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),date=_React$useState2[0],setDate=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),rows=_React$useState4[0],setRows=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),del=_React$useState6[0],setDel=_React$useState6[1];var c=0;var handleDateChange=function handleDateChange(e){setDate(e);};useEffect(function(_){axios.get(baseUrl+'/rooms',{headers:{'Authorization':'token '+reactLocalStorage.get('token')}}).then(function(res){setRows(res.data);});},[del,date]);return React.createElement(\"div\",{className:classes.root},React.createElement(CssBaseline,null),React.createElement(\"main\",{className:classes.content},React.createElement(\"div\",{className:classes.appBarSpacer}),React.createElement(Container,{maxWidth:\"lg\",className:classes.container},React.createElement(Box,{color:\"text.secondary\",style:{textAlign:'center'}},React.createElement(\"h2\",null,\"Pick a date to book\")),React.createElement(MuiPickersUtilsProvider,{utils:DateFnsUtils},React.createElement(KeyboardDatePicker,{margin:\"normal\",id:\"time-picker\",label:\"Date\",value:date,onChange:handleDateChange,KeyboardButtonProps:{'aria-label':'change time'}})),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(Paper,{className:classes.paper},React.createElement(\"div\",{style:{alignSelf:'baseline'}},React.createElement(Title,null,\"Available Rooms\")),React.createElement(List,null,rows.map(function(row){var now=new Date();var avail=false;for(var i in row.time_slots){var a=true;for(var j in row.time_slots[i].bookings){var then=new Date(row.time_slots[i].bookings[j].date);if(date&&then.getDate()===date.getDate()&&then.getMonth()===date.getMonth())a=false;console.log(then,date);}if(a)avail=true;}if(date&&avail&&Math.ceil((date-now)/(24*3600*1000))>=0&&Math.ceil((date-now)/(24*3600*1000))<=row.num_days_in_adv){c++;return React.createElement(RowComponent,{date:date,key:row.id,rooms:row,setDel:setDel,del:del});}return null;}),!c&&date&&React.createElement(Typography,{color:\"textSecondary\",style:{textAlign:'center'}},\"No rooms available for the date!\"),!c&&!date&&React.createElement(Typography,{color:\"textSecondary\",style:{textAlign:'center'}},\"Pick a date to book!\"))))));}","map":{"version":3,"sources":["/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/customer/book/book.component.jsx"],"names":["React","useEffect","DateFnsUtils","KeyboardDatePicker","MuiPickersUtilsProvider","CssBaseline","Container","makeStyles","FormHelperText","ListItemText","Paper","Title","axios","reactLocalStorage","Typography","List","ListItem","Grid","BookModalComponent","Box","useStyles","theme","root","display","marginLeft","spacing","appBarSpacer","mixins","toolbar","content","flexGrow","height","overflow","container","paddingTop","paddingBottom","textAlign","paper","padding","flexDirection","fixedHeight","addBtn","position","right","bottom","width","listPaper","delRoom","float","margin","transform","cursor","baseUrl","process","env","REACT_APP_HOST_BASE_URL","RowComponent","props","classes","roomName","marginBottom","rooms","name","date","del","setDel","Book","useState","setDate","rows","setRows","c","handleDateChange","e","_","get","headers","then","res","data","alignSelf","map","row","now","Date","avail","i","time_slots","a","j","bookings","getDate","getMonth","console","log","Math","ceil","num_days_in_adv","id"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport {KeyboardDatePicker, MuiPickersUtilsProvider} from \"@material-ui/pickers\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {FormHelperText, ListItemText, Paper} from \"@material-ui/core\";\nimport Title from \"../../title.component\";\nimport axios from \"axios\";\nimport {reactLocalStorage} from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Grid from \"@material-ui/core/Grid\";\nimport BookModalComponent from \"./book-modal.component\";\nimport Box from \"@material-ui/core/Box\";\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        marginLeft: theme.spacing(7)\n    },\n    appBarSpacer: theme.mixins.toolbar,\n    content: {\n        flexGrow: 1,\n        height: '100vh',\n        overflow: 'auto',\n    },\n    container: {\n        paddingTop: theme.spacing(4),\n        paddingBottom: theme.spacing(4),\n        textAlign: 'center'\n    },\n    paper: {\n        padding: theme.spacing(2),\n        display: 'flex',\n        overflow: 'auto',\n        flexDirection: 'column',\n        textAlign: 'left'\n    },\n    fixedHeight: {\n        height: 240,\n    },\n    addBtn: {\n        position: 'fixed',\n        right: '3%',\n        bottom: '3%',\n        height: '70px',\n        width: '70px'\n    },\n    listPaper: {\n        width: '100%',\n        padding: '0 2%'\n    },\n    delRoom: {\n        float: 'right',\n        margin: '44px 0px 0 ',\n        transform: 'translateY(-50%)',\n        cursor: 'pointer'\n    },\n}));\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\n\nfunction RowComponent(props) {\n    const classes = useStyles();\n\n    return (\n        <ListItem>\n            <Paper className={classes.listPaper}>\n                <ListItemText className={classes.roomName}>\n                    <Grid style={{float: 'left'}}>\n                        <h3 style={{marginBottom: '5px'}}>{props.rooms.name}</h3>\n                        <FormHelperText style={{margin: '2px'}}>Room</FormHelperText>\n                    </Grid>\n                </ListItemText>\n                <BookModalComponent rows={props.rooms} date={props.date} del={props.del} setDel={props.setDel}/>\n            </Paper>\n        </ListItem>\n    )\n}\n\n\nexport default function Book(props) {\n    const classes = useStyles();\n    const [date, setDate] = React.useState(null);\n    const [rows, setRows] = React.useState([]);\n    const [del, setDel] = React.useState(false);\n    let c = 0;\n\n    const handleDateChange = (e) => {\n        setDate(e);\n    };\n\n    useEffect(_ => {\n        axios.get(baseUrl + '/rooms', {headers: {'Authorization': 'token ' + reactLocalStorage.get('token')}}).then((res) => {\n            setRows(res.data);\n        })\n    }, [del, date]);\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <main className={classes.content}>\n                <div className={classes.appBarSpacer}/>\n                <Container maxWidth=\"lg\" className={classes.container}>\n                    <Box color=\"text.secondary\" style={{textAlign: 'center'}}><h2>Pick a date to book</h2></Box>\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <KeyboardDatePicker\n                            margin=\"normal\"\n                            id=\"time-picker\"\n                            label=\"Date\"\n                            value={date}\n                            onChange={handleDateChange}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change time',\n                            }}\n                        />\n                    </MuiPickersUtilsProvider>\n                    <br/><br/><br/><br/>\n                    <Paper className={classes.paper}>\n                        <div style={{alignSelf: 'baseline'}}><Title>Available Rooms</Title></div>\n                        <List>\n                            {rows.map(row => {\n                                let now = new Date();\n                                let avail = false;\n                                for (let i in row.time_slots) {\n                                    let a = true;\n                                    for (let j in row.time_slots[i].bookings) {\n                                        let then = new Date(row.time_slots[i].bookings[j].date)\n                                        if (date && then.getDate() === date.getDate() && then.getMonth() === date.getMonth())\n                                            a = false;\n                                        console.log(then, date)\n                                    }\n                                    if (a)\n                                        avail = true;\n                                }\n\n                                if (date && avail && Math.ceil((date - now) / (24 * 3600 * 1000)) >= 0 && Math.ceil((date - now) / (24 * 3600 * 1000)) <= row.num_days_in_adv) {\n                                    c++;\n                                    return (\n                                        <RowComponent date={date} key={row.id} rooms={row} setDel={setDel}\n                                                      del={del}/>)\n                                }\n                                return null\n                            })}\n                            {!c && date &&\n                            <Typography color=\"textSecondary\" style={{textAlign: 'center'}}>No rooms available for the\n                                date!</Typography>}\n                            {!c && !date &&\n                            <Typography color=\"textSecondary\" style={{textAlign: 'center'}}>Pick a date to\n                                book!</Typography>}\n                        </List>\n                    </Paper>\n                </Container>\n            </main>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}