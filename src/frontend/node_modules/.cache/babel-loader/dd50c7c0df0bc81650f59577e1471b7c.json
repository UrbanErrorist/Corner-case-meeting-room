{"ast":null,"code":"var _jsxFileName = \"/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/login/login.component.jsx\";\nimport React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport axios from 'axios';\nimport * as qs from \"qs\";\nimport { reactLocalStorage } from 'reactjs-localstorage';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'relative',\n    top: '40vh',\n    transform: 'translateY(-50%)',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.pwdChange = e => {\n      this.setState({\n        pwd: e.target.value\n      });\n      if (!(e.target.value.toString().length >= 8)) this.setState({\n        validPwd: false\n      });else this.setState({\n        validPwd: true\n      });\n    };\n\n    this.usernameChange = e => {\n      this.setState({\n        username: e.target.value\n      });\n      if (!(e.target.value.toString().length >= 5)) this.setState({\n        validUsername: false\n      });else this.setState({\n        validUsername: true\n      });\n    };\n\n    this.submit = e => {\n      e.preventDefault(); // Username\n\n      if (!(this.state.username.toString().length >= 5)) this.setState({\n        validUsername: false\n      });else this.setState({\n        validUsername: true\n      }); // Pwd\n\n      if (!(this.state.pwd.toString().length >= 8)) this.setState({\n        validPwd: false\n      });else this.setState({\n        validPwd: true\n      });\n\n      if (this.state.validUsername && this.state.validPwd) {\n        let data = {\n          username: this.state.username,\n          password: this.state.pwd\n        };\n        const config = {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        };\n        axios.post(baseUrl + '/login', qs.stringify(data), config).then(res => {\n          this.setState({\n            errors: \"\"\n          });\n\n          if (res.data.token) {\n            reactLocalStorage.remove('token');\n            reactLocalStorage.set('token', res.data.token);\n          }\n\n          this.props.setAuth(true);\n          this.props.history.replace('/');\n          axios.get(baseUrl + '/profile', {\n            headers: {\n              'Authorization': 'token ' + res.data.token\n            }\n          }).then(res => {\n            let role;\n            if (res.data.is_customer) role = 'customer';else if (res.data.is_room_manager) role = 'roomManager';\n            reactLocalStorage.remove('role');\n            reactLocalStorage.set('role', role);\n            this.props.setRole(role);\n          });\n        }).catch(error => {\n          if (!error.response) {\n            // network error\n            console.log('Error: Network Error\\n' + error);\n          } else {\n            let res = error.response.data;\n            let errors = \"\";\n\n            for (let i in res) errors += res[i][0] + \"\\n\";\n\n            this.setState({\n              errors\n            });\n          }\n        });\n      }\n    };\n\n    this.state = {\n      username: \"\",\n      pwd: \"\",\n      role: \"\",\n      validUsername: true,\n      validPwd: true,\n      validRole: false,\n      errors: \"\"\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: this.props.classes.form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validUsername,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      id: \"username\",\n      label: \"Username\",\n      name: \"username\",\n      autoComplete: \"username\",\n      onChange: this.usernameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validPwd,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"Password\",\n      type: \"password\",\n      id: \"password\",\n      autoComplete: \"current-password\",\n      onChange: this.pwdChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(FormHelperText, {\n      error: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.state.errors))), React.createElement(Button, {\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      className: this.props.classes.submit,\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Login\"), React.createElement(Grid, {\n      container: true,\n      justify: \"flex-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Link, {\n      href: \"/signup\",\n      onClick: e => {\n        e.preventDefault();\n        this.props.history.push('/signup');\n      },\n      variant: \"body2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Don't have an account? SignUp\")))));\n  }\n\n}\n\nexport default function SignUp(props) {\n  const classes = useStyles();\n  return React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    className: classes.avatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(LockOutlinedIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  })), React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, \"Login\"), React.createElement(Form, Object.assign({\n    classes: classes\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }))));\n}","map":{"version":3,"sources":["/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/login/login.component.jsx"],"names":["React","Avatar","Button","CssBaseline","TextField","Link","Grid","LockOutlinedIcon","Typography","makeStyles","Container","FormHelperText","axios","qs","reactLocalStorage","useStyles","theme","paper","position","top","transform","display","flexDirection","alignItems","avatar","margin","spacing","backgroundColor","palette","secondary","main","form","width","marginTop","submit","baseUrl","process","env","REACT_APP_HOST_BASE_URL","Form","Component","constructor","props","pwdChange","e","setState","pwd","target","value","toString","length","validPwd","usernameChange","username","validUsername","preventDefault","state","data","password","config","headers","post","stringify","then","res","errors","token","remove","set","setAuth","history","replace","get","role","is_customer","is_room_manager","setRole","catch","error","response","console","log","i","validRole","render","classes","push","SignUp"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,SAAQC,iBAAR,QAAgC,sBAAhC;AAEA,MAAMC,SAAS,GAAGN,UAAU,CAACO,KAAK,KAAK;AACnCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,QAAQ,EAAE,UADP;AAEHC,IAAAA,GAAG,EAAE,MAFF;AAGHC,IAAAA,SAAS,EAAE,kBAHR;AAIHC,IAAAA,OAAO,EAAE,MAJN;AAKHC,IAAAA,aAAa,EAAE,QALZ;AAMHC,IAAAA,UAAU,EAAE;AANT,GAD4B;AASnCC,EAAAA,MAAM,EAAE;AACJC,IAAAA,MAAM,EAAET,KAAK,CAACU,OAAN,CAAc,CAAd,CADJ;AAEJC,IAAAA,eAAe,EAAEX,KAAK,CAACY,OAAN,CAAcC,SAAd,CAAwBC;AAFrC,GAT2B;AAanCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,KAAK,EAAE,MADL;AACa;AACfC,IAAAA,SAAS,EAAEjB,KAAK,CAACU,OAAN,CAAc,CAAd;AAFT,GAb6B;AAiBnCQ,EAAAA,MAAM,EAAE;AACJT,IAAAA,MAAM,EAAET,KAAK,CAACU,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AADJ;AAjB2B,CAAL,CAAN,CAA5B;AAsBA,MAAMS,OAAO,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,uBAAwB,EAAvD;;AAEA,MAAMC,IAAN,SAAmBvC,KAAK,CAACwC,SAAzB,CAAmC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAcnBC,SAdmB,GAcNC,CAAD,IAAO;AACf,WAAKC,QAAL,CAAc;AAACC,QAAAA,GAAG,EAAEF,CAAC,CAACG,MAAF,CAASC;AAAf,OAAd;AACA,UAAI,EAAEJ,CAAC,CAACG,MAAF,CAASC,KAAT,CAAeC,QAAf,GAA0BC,MAA1B,IAAoC,CAAtC,CAAJ,EACI,KAAKL,QAAL,CAAc;AAACM,QAAAA,QAAQ,EAAE;AAAX,OAAd,EADJ,KAGI,KAAKN,QAAL,CAAc;AAACM,QAAAA,QAAQ,EAAE;AAAX,OAAd;AACP,KApBkB;;AAAA,SAuBnBC,cAvBmB,GAuBDR,CAAD,IAAO;AACpB,WAAKC,QAAL,CAAc;AAACQ,QAAAA,QAAQ,EAAET,CAAC,CAACG,MAAF,CAASC;AAApB,OAAd;AACA,UAAI,EAAEJ,CAAC,CAACG,MAAF,CAASC,KAAT,CAAeC,QAAf,GAA0BC,MAA1B,IAAoC,CAAtC,CAAJ,EACI,KAAKL,QAAL,CAAc;AAACS,QAAAA,aAAa,EAAE;AAAhB,OAAd,EADJ,KAGI,KAAKT,QAAL,CAAc;AAACS,QAAAA,aAAa,EAAE;AAAhB,OAAd;AACP,KA7BkB;;AAAA,SA+BnBpB,MA/BmB,GA+BTU,CAAD,IAAO;AACZA,MAAAA,CAAC,CAACW,cAAF,GADY,CAEZ;;AACA,UAAI,EAAE,KAAKC,KAAL,CAAWH,QAAX,CAAoBJ,QAApB,GAA+BC,MAA/B,IAAyC,CAA3C,CAAJ,EACI,KAAKL,QAAL,CAAc;AAACS,QAAAA,aAAa,EAAE;AAAhB,OAAd,EADJ,KAGI,KAAKT,QAAL,CAAc;AAACS,QAAAA,aAAa,EAAE;AAAhB,OAAd,EANQ,CAQZ;;AACA,UAAI,EAAE,KAAKE,KAAL,CAAWV,GAAX,CAAeG,QAAf,GAA0BC,MAA1B,IAAoC,CAAtC,CAAJ,EACI,KAAKL,QAAL,CAAc;AAACM,QAAAA,QAAQ,EAAE;AAAX,OAAd,EADJ,KAGI,KAAKN,QAAL,CAAc;AAACM,QAAAA,QAAQ,EAAE;AAAX,OAAd;;AAEJ,UAAI,KAAKK,KAAL,CAAWF,aAAX,IAA4B,KAAKE,KAAL,CAAWL,QAA3C,EAAqD;AACjD,YAAIM,IAAI,GAAG;AACPJ,UAAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWH,QADd;AAEPK,UAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWV;AAFd,SAAX;AAIA,cAAMa,MAAM,GAAG;AACXC,UAAAA,OAAO,EAAE;AACL,4BAAgB;AADX;AADE,SAAf;AAKAhD,QAAAA,KAAK,CAACiD,IAAN,CAAW1B,OAAO,GAAG,QAArB,EAA+BtB,EAAE,CAACiD,SAAH,CAAaL,IAAb,CAA/B,EAAmDE,MAAnD,EAA2DI,IAA3D,CAAgEC,GAAG,IAAI;AACnE,eAAKnB,QAAL,CAAc;AAACoB,YAAAA,MAAM,EAAE;AAAT,WAAd;;AACA,cAAID,GAAG,CAACP,IAAJ,CAASS,KAAb,EAAoB;AAChBpD,YAAAA,iBAAiB,CAACqD,MAAlB,CAAyB,OAAzB;AACArD,YAAAA,iBAAiB,CAACsD,GAAlB,CAAsB,OAAtB,EAA+BJ,GAAG,CAACP,IAAJ,CAASS,KAAxC;AACH;;AACD,eAAKxB,KAAL,CAAW2B,OAAX,CAAmB,IAAnB;AACA,eAAK3B,KAAL,CAAW4B,OAAX,CAAmBC,OAAnB,CAA2B,GAA3B;AACA3D,UAAAA,KAAK,CAAC4D,GAAN,CAAUrC,OAAO,GAAG,UAApB,EAAgC;AAACyB,YAAAA,OAAO,EAAE;AAAC,+BAAiB,WAAWI,GAAG,CAACP,IAAJ,CAASS;AAAtC;AAAV,WAAhC,EAAyFH,IAAzF,CAA+FC,GAAD,IAAS;AACnG,gBAAIS,IAAJ;AACA,gBAAIT,GAAG,CAACP,IAAJ,CAASiB,WAAb,EACID,IAAI,GAAG,UAAP,CADJ,KAEK,IAAIT,GAAG,CAACP,IAAJ,CAASkB,eAAb,EACDF,IAAI,GAAG,aAAP;AACJ3D,YAAAA,iBAAiB,CAACqD,MAAlB,CAAyB,MAAzB;AACArD,YAAAA,iBAAiB,CAACsD,GAAlB,CAAsB,MAAtB,EAA8BK,IAA9B;AACA,iBAAK/B,KAAL,CAAWkC,OAAX,CAAmBH,IAAnB;AACH,WATD;AAUH,SAlBD,EAkBGI,KAlBH,CAkBSC,KAAK,IAAI;AACd,cAAI,CAACA,KAAK,CAACC,QAAX,EAAqB;AACjB;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2BH,KAAvC;AACH,WAHD,MAGO;AACH,gBAAId,GAAG,GAAGc,KAAK,CAACC,QAAN,CAAetB,IAAzB;AACA,gBAAIQ,MAAM,GAAG,EAAb;;AACA,iBAAK,IAAIiB,CAAT,IAAclB,GAAd,EACIC,MAAM,IAAID,GAAG,CAACkB,CAAD,CAAH,CAAO,CAAP,IAAY,IAAtB;;AACJ,iBAAKrC,QAAL,CAAc;AAACoB,cAAAA;AAAD,aAAd;AACH;AACJ,SA7BD;AA8BH;AACJ,KAtFkB;;AAEf,SAAKT,KAAL,GAAa;AACTH,MAAAA,QAAQ,EAAE,EADD;AAETP,MAAAA,GAAG,EAAE,EAFI;AAGT2B,MAAAA,IAAI,EAAE,EAHG;AAITnB,MAAAA,aAAa,EAAE,IAJN;AAKTH,MAAAA,QAAQ,EAAE,IALD;AAMTgC,MAAAA,SAAS,EAAE,KANF;AAOTlB,MAAAA,MAAM,EAAE;AAPC,KAAb;AASH;;AA6EDmB,EAAAA,MAAM,GAAG;AACL,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,SAAS,EAAE,KAAK1C,KAAL,CAAW2C,OAAX,CAAmBtD,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,KAAK,EAAE,CAAC,KAAKyB,KAAL,CAAWF,aADvB;AAEI,MAAA,OAAO,EAAC,UAFZ;AAGI,MAAA,QAAQ,MAHZ;AAII,MAAA,SAAS,MAJb;AAKI,MAAA,EAAE,EAAC,UALP;AAMI,MAAA,KAAK,EAAC,UANV;AAOI,MAAA,IAAI,EAAC,UAPT;AAQI,MAAA,YAAY,EAAC,UARjB;AASI,MAAA,QAAQ,EAAE,KAAKF,cATnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EAcI,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AACI,MAAA,KAAK,EAAE,CAAC,KAAKI,KAAL,CAAWL,QADvB;AAEI,MAAA,OAAO,EAAC,UAFZ;AAGI,MAAA,QAAQ,MAHZ;AAII,MAAA,SAAS,MAJb;AAKI,MAAA,IAAI,EAAC,UALT;AAMI,MAAA,KAAK,EAAC,UANV;AAOI,MAAA,IAAI,EAAC,UAPT;AAQI,MAAA,EAAE,EAAC,UARP;AASI,MAAA,YAAY,EAAC,kBATjB;AAUI,MAAA,QAAQ,EAAE,KAAKR,SAVnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAdJ,EA4BI,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,cAAD;AAAgB,MAAA,KAAK,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKa,KAAL,CAAWS,MADhB,CADJ,CA5BJ,CADJ,EAmCI,oBAAC,MAAD;AACI,MAAA,SAAS,MADb;AAEI,MAAA,OAAO,EAAC,WAFZ;AAGI,MAAA,KAAK,EAAC,SAHV;AAII,MAAA,SAAS,EAAE,KAAKvB,KAAL,CAAW2C,OAAX,CAAmBnD,MAJlC;AAKI,MAAA,OAAO,EAAE,KAAKA,MALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAnCJ,EA4CI,oBAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,OAAO,EAAC,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAE,SAAZ;AAAuB,MAAA,OAAO,EAAGU,CAAD,IAAO;AACnCA,QAAAA,CAAC,CAACW,cAAF;AACA,aAAKb,KAAL,CAAW4B,OAAX,CAAmBgB,IAAnB,CAAwB,SAAxB;AACH,OAHD;AAGG,MAAA,OAAO,EAAC,OAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADJ,CADJ,CA5CJ,CADJ,CADJ;AA2DH;;AArJ8B;;AAwJnC,eAAe,SAASC,MAAT,CAAgB7C,KAAhB,EAAuB;AAClC,QAAM2C,OAAO,GAAGtE,SAAS,EAAzB;AAEA,SACI,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,MAArB;AAA4B,IAAA,QAAQ,EAAC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,SAAS,EAAEsE,OAAO,CAACpE,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAEoE,OAAO,CAAC7D,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAII,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAC,IAAtB;AAA2B,IAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJJ,EAOI,oBAAC,IAAD;AAAM,IAAA,OAAO,EAAE6D;AAAf,KAA4B3C,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAPJ,CAFJ,CADJ;AAcH","sourcesContent":["import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport axios from 'axios'\nimport * as qs from \"qs\";\nimport {reactLocalStorage} from 'reactjs-localstorage'\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        position: 'relative',\n        top: '40vh',\n        transform: 'translateY(-50%)',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(3),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nclass Form extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            pwd: \"\",\n            role: \"\",\n            validUsername: true,\n            validPwd: true,\n            validRole: false,\n            errors: \"\"\n        }\n    }\n\n\n    pwdChange = (e) => {\n        this.setState({pwd: e.target.value});\n        if (!(e.target.value.toString().length >= 8))\n            this.setState({validPwd: false});\n        else\n            this.setState({validPwd: true})\n    };\n\n\n    usernameChange = (e) => {\n        this.setState({username: e.target.value});\n        if (!(e.target.value.toString().length >= 5))\n            this.setState({validUsername: false});\n        else\n            this.setState({validUsername: true})\n    };\n\n    submit = (e) => {\n        e.preventDefault();\n        // Username\n        if (!(this.state.username.toString().length >= 5))\n            this.setState({validUsername: false});\n        else\n            this.setState({validUsername: true});\n\n        // Pwd\n        if (!(this.state.pwd.toString().length >= 8))\n            this.setState({validPwd: false});\n        else\n            this.setState({validPwd: true});\n\n        if (this.state.validUsername && this.state.validPwd) {\n            let data = {\n                username: this.state.username,\n                password: this.state.pwd\n            };\n            const config = {\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                }\n            };\n            axios.post(baseUrl + '/login', qs.stringify(data), config).then(res => {\n                this.setState({errors: \"\"});\n                if (res.data.token) {\n                    reactLocalStorage.remove('token');\n                    reactLocalStorage.set('token', res.data.token)\n                }\n                this.props.setAuth(true);\n                this.props.history.replace('/');\n                axios.get(baseUrl + '/profile', {headers: {'Authorization': 'token ' + res.data.token}}).then((res) => {\n                    let role;\n                    if (res.data.is_customer)\n                        role = 'customer';\n                    else if (res.data.is_room_manager)\n                        role = 'roomManager';\n                    reactLocalStorage.remove('role');\n                    reactLocalStorage.set('role', role);\n                    this.props.setRole(role);\n                })\n            }).catch(error => {\n                if (!error.response) {\n                    // network error\n                    console.log('Error: Network Error\\n' + error);\n                } else {\n                    let res = error.response.data;\n                    let errors = \"\";\n                    for (let i in res)\n                        errors += res[i][0] + \"\\n\";\n                    this.setState({errors});\n                }\n            })\n        }\n    };\n\n    render() {\n        return (\n            <div>\n                <form className={this.props.classes.form}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validUsername}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"username\"\n                                label=\"Username\"\n                                name=\"username\"\n                                autoComplete=\"username\"\n                                onChange={this.usernameChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validPwd}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                name=\"password\"\n                                label=\"Password\"\n                                type=\"password\"\n                                id=\"password\"\n                                autoComplete=\"current-password\"\n                                onChange={this.pwdChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <FormHelperText error>\n                                {this.state.errors}\n                            </FormHelperText>\n                        </Grid>\n                    </Grid>\n                    <Button\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={this.props.classes.submit}\n                        onClick={this.submit}\n                    >\n                        Login\n                    </Button>\n                    <Grid container justify=\"flex-end\">\n                        <Grid item>\n                            <Link href={\"/signup\"} onClick={(e) => {\n                                e.preventDefault();\n                                this.props.history.push('/signup')\n                            }} variant=\"body2\">\n                                Don't have an account? SignUp\n                            </Link>\n                        </Grid>\n                    </Grid>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default function SignUp(props) {\n    const classes = useStyles();\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Login\n                </Typography>\n                <Form classes={classes} {...props}/>\n            </div>\n        </Container>\n    );\n}"]},"metadata":{},"sourceType":"module"}