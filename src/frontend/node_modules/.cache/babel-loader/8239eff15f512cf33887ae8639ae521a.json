{"ast":null,"code":"var _jsxFileName = \"/Users/blackhat/Desktop/testingRoom/src/frontend/src/components/customer/book/book.component.jsx\";\nimport React, { useEffect } from 'react';\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from \"@material-ui/core/Container\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormHelperText, ListItemText, Paper } from \"@material-ui/core\";\nimport Title from \"../../title.component\";\nimport axios from \"axios\";\nimport { reactLocalStorage } from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Grid from \"@material-ui/core/Grid\";\nimport BookModalComponent from \"./book-modal.component\";\nimport Box from \"@material-ui/core/Box\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    marginLeft: theme.spacing(7)\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto'\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n    textAlign: 'center'\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column',\n    textAlign: 'left'\n  },\n  fixedHeight: {\n    height: 240\n  },\n  addBtn: {\n    position: 'fixed',\n    right: '3%',\n    bottom: '3%',\n    height: '70px',\n    width: '70px'\n  },\n  listPaper: {\n    width: '100%',\n    padding: '0 2%'\n  },\n  delRoom: {\n    float: 'right',\n    margin: '44px 0px 0 ',\n    transform: 'translateY(-50%)',\n    cursor: 'pointer'\n  }\n}));\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nfunction RowComponent(props) {\n  const classes = useStyles();\n  return React.createElement(ListItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.listPaper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(ListItemText, {\n    className: classes.roomName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      float: 'left'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: '5px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, props.rooms.name), React.createElement(FormHelperText, {\n    style: {\n      margin: '2px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Room\"))), React.createElement(BookModalComponent, {\n    rows: props.rooms,\n    date: props.date,\n    del: props.del,\n    setDel: props.setDel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })));\n}\n\nexport default function Book(props) {\n  const classes = useStyles();\n  const [date, setDate] = React.useState(null);\n  const [rows, setRows] = React.useState([]);\n  const [del, setDel] = React.useState(false);\n  let c = 0;\n\n  const handleDateChange = e => {\n    setDate(e);\n  };\n\n  useEffect(_ => {\n    axios.get(baseUrl + '/rooms', {\n      headers: {\n        'Authorization': 'token ' + reactLocalStorage.get('token')\n      }\n    }).then(res => {\n      setRows(res.data);\n    });\n  }, [del, date]);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(\"main\", {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.appBarSpacer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Container, {\n    maxWidth: \"lg\",\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Box, {\n    color: \"text.secondary\",\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Pick a date to book\")), React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(KeyboardDatePicker, {\n    margin: \"normal\",\n    id: \"time-picker\",\n    label: \"Date\",\n    value: date,\n    onChange: handleDateChange,\n    KeyboardButtonProps: {\n      'aria-label': 'change time'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), React.createElement(Paper, {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      alignSelf: 'baseline'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Available Rooms\")), React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, rows.map(row => {\n    let now = new Date();\n    let avail = false;\n\n    for (let i in row.time_slots) {\n      let a = true;\n\n      for (let j in row.time_slots[i].bookings) {\n        let then = new Date(row.time_slots[i].bookings[j].date);\n        if (date && then.getDate() === date.getDate() && then.getMonth() === date.getMonth()) a = false;\n        console.log(then, date);\n      }\n\n      if (a) avail = true;\n    }\n\n    if (date && avail && Math.ceil((date - now) / (24 * 3600 * 1000)) >= 0 && Math.ceil((date - now) / (24 * 3600 * 1000)) <= row.num_days_in_adv) {\n      c++;\n      return React.createElement(RowComponent, {\n        date: date,\n        key: row.id,\n        rooms: row,\n        setDel: setDel,\n        del: del,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      });\n    }\n\n    return null;\n  }), !c && date && React.createElement(Typography, {\n    color: \"textSecondary\",\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"No rooms available for the date!\"), !c && !date && React.createElement(Typography, {\n    color: \"textSecondary\",\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Pick a date to book!\"))))));\n}","map":{"version":3,"sources":["/Users/blackhat/Desktop/testingRoom/src/frontend/src/components/customer/book/book.component.jsx"],"names":["React","useEffect","DateFnsUtils","KeyboardDatePicker","MuiPickersUtilsProvider","CssBaseline","Container","makeStyles","FormHelperText","ListItemText","Paper","Title","axios","reactLocalStorage","Typography","List","ListItem","Grid","BookModalComponent","Box","useStyles","theme","root","display","marginLeft","spacing","appBarSpacer","mixins","toolbar","content","flexGrow","height","overflow","container","paddingTop","paddingBottom","textAlign","paper","padding","flexDirection","fixedHeight","addBtn","position","right","bottom","width","listPaper","delRoom","float","margin","transform","cursor","baseUrl","process","env","REACT_APP_HOST_BASE_URL","RowComponent","props","classes","roomName","marginBottom","rooms","name","date","del","setDel","Book","setDate","useState","rows","setRows","c","handleDateChange","e","_","get","headers","then","res","data","alignSelf","map","row","now","Date","avail","i","time_slots","a","j","bookings","getDate","getMonth","console","log","Math","ceil","num_days_in_adv","id"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport {KeyboardDatePicker, MuiPickersUtilsProvider} from \"@material-ui/pickers\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {FormHelperText, ListItemText, Paper} from \"@material-ui/core\";\nimport Title from \"../../title.component\";\nimport axios from \"axios\";\nimport {reactLocalStorage} from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Grid from \"@material-ui/core/Grid\";\nimport BookModalComponent from \"./book-modal.component\";\nimport Box from \"@material-ui/core/Box\";\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        marginLeft: theme.spacing(7)\n    },\n    appBarSpacer: theme.mixins.toolbar,\n    content: {\n        flexGrow: 1,\n        height: '100vh',\n        overflow: 'auto',\n    },\n    container: {\n        paddingTop: theme.spacing(4),\n        paddingBottom: theme.spacing(4),\n        textAlign: 'center'\n    },\n    paper: {\n        padding: theme.spacing(2),\n        display: 'flex',\n        overflow: 'auto',\n        flexDirection: 'column',\n        textAlign: 'left'\n    },\n    fixedHeight: {\n        height: 240,\n    },\n    addBtn: {\n        position: 'fixed',\n        right: '3%',\n        bottom: '3%',\n        height: '70px',\n        width: '70px'\n    },\n    listPaper: {\n        width: '100%',\n        padding: '0 2%'\n    },\n    delRoom: {\n        float: 'right',\n        margin: '44px 0px 0 ',\n        transform: 'translateY(-50%)',\n        cursor: 'pointer'\n    },\n}));\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\n\nfunction RowComponent(props) {\n    const classes = useStyles();\n\n    return (\n        <ListItem>\n            <Paper className={classes.listPaper}>\n                <ListItemText className={classes.roomName}>\n                    <Grid style={{float: 'left'}}>\n                        <h3 style={{marginBottom: '5px'}}>{props.rooms.name}</h3>\n                        <FormHelperText style={{margin: '2px'}}>Room</FormHelperText>\n                    </Grid>\n                </ListItemText>\n                <BookModalComponent rows={props.rooms} date={props.date} del={props.del} setDel={props.setDel}/>\n            </Paper>\n        </ListItem>\n    )\n}\n\n\nexport default function Book(props) {\n    const classes = useStyles();\n    const [date, setDate] = React.useState(null);\n    const [rows, setRows] = React.useState([]);\n    const [del, setDel] = React.useState(false);\n    let c = 0;\n\n    const handleDateChange = (e) => {\n        setDate(e);\n    };\n\n    useEffect(_ => {\n        axios.get(baseUrl + '/rooms', {headers: {'Authorization': 'token ' + reactLocalStorage.get('token')}}).then((res) => {\n            setRows(res.data);\n        })\n    }, [del, date]);\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <main className={classes.content}>\n                <div className={classes.appBarSpacer}/>\n                <Container maxWidth=\"lg\" className={classes.container}>\n                    <Box color=\"text.secondary\" style={{textAlign: 'center'}}><h2>Pick a date to book</h2></Box>\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <KeyboardDatePicker\n                            margin=\"normal\"\n                            id=\"time-picker\"\n                            label=\"Date\"\n                            value={date}\n                            onChange={handleDateChange}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change time',\n                            }}\n                        />\n                    </MuiPickersUtilsProvider>\n                    <br/><br/><br/><br/>\n                    <Paper className={classes.paper}>\n                        <div style={{alignSelf: 'baseline'}}><Title>Available Rooms</Title></div>\n                        <List>\n                            {rows.map(row => {\n                                let now = new Date();\n                                let avail = false;\n                                for (let i in row.time_slots) {\n                                    let a = true;\n                                    for (let j in row.time_slots[i].bookings) {\n                                        let then = new Date(row.time_slots[i].bookings[j].date)\n                                        if (date && then.getDate() === date.getDate() && then.getMonth() === date.getMonth())\n                                            a = false;\n                                        console.log(then, date)\n                                    }\n                                    if (a)\n                                        avail = true;\n                                }\n\n                                if (date && avail && Math.ceil((date - now) / (24 * 3600 * 1000)) >= 0 && Math.ceil((date - now) / (24 * 3600 * 1000)) <= row.num_days_in_adv) {\n                                    c++;\n                                    return (\n                                        <RowComponent date={date} key={row.id} rooms={row} setDel={setDel}\n                                                      del={del}/>)\n                                }\n                                return null\n                            })}\n                            {!c && date &&\n                            <Typography color=\"textSecondary\" style={{textAlign: 'center'}}>No rooms available for the\n                                date!</Typography>}\n                            {!c && !date &&\n                            <Typography color=\"textSecondary\" style={{textAlign: 'center'}}>Pick a date to\n                                book!</Typography>}\n                        </List>\n                    </Paper>\n                </Container>\n            </main>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}