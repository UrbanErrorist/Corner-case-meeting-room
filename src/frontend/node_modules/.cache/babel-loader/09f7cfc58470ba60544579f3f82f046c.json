{"ast":null,"code":"var _jsxFileName = \"/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/customer/bookings.component.jsx\";\nimport React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Title from \"../title.component\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport { FormHelperText, ListItemText, Paper } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Grid from \"@material-ui/core/Grid\";\nimport axios from \"axios\";\nimport { reactLocalStorage } from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport ProfileModal from \"../profile/profile-modal.component\";\nconst useStyles = makeStyles(_ => ({\n  listPaper: {\n    width: \"100%\",\n    padding: \"0 2%\"\n  },\n  roomTitle: {\n    float: \"left\",\n    margin: \"11px 10px\"\n  },\n  roomName: {\n    float: \"left\",\n    marginRight: \"10%\"\n  },\n  delRoom: {\n    float: \"right\",\n    margin: \"44px 0px 0 \",\n    transform: \"translateY(-50%)\",\n    cursor: \"pointer\"\n  }\n}));\n\nfunction formatTime(s) {\n  let n = parseInt(s.split(\":\")[0]),\n      ampm = \" AM\";\n\n  if (n > 12) {\n    n -= 12;\n    ampm = \" PM\";\n  }\n\n  return n + \":\" + s.split(\":\")[1] + ampm;\n}\n\nfunction RowComponent(props) {\n  const classes = useStyles();\n\n  const handleDel = e => {\n    e.preventDefault();\n    axios.delete(baseUrl + \"/bookings/\" + props.booking.id, {\n      headers: {\n        Authorization: \"token \" + reactLocalStorage.get(\"token\")\n      }\n    }).then(_ => {\n      props.setDel(!props.del);\n    });\n  };\n\n  const deletable = s => {\n    s = s.replace(\"-\", \"\").replace(\"-\", \"\");\n    let sn = parseInt(s),\n        d = new Date(),\n        now;\n    now = parseInt(pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2));\n    return sn >= now;\n  };\n\n  return React.createElement(ListItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.listPaper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(ListItemText, {\n    className: classes.roomName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: \"5px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, props.booking.time_slot.room_id.name), React.createElement(FormHelperText, {\n    style: {\n      margin: \"2px\",\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Room\"))), React.createElement(ListItemText, {\n    className: classes.roomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: \"5px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, props.booking.date))), React.createElement(ListItemText, {\n    className: classes.roomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: \"5px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, formatTime(props.booking.time_slot.time_from)))), React.createElement(Box, {\n    color: \"text.secondary\",\n    className: classes.roomTitle,\n    style: {\n      marginTop: \"19px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"to\")), React.createElement(ListItemText, {\n    className: classes.roomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      marginBottom: \"5px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, formatTime(props.booking.time_slot.time_to)))), !props.roomManager && deletable(props.booking.date) && React.createElement(IconButton, {\n    className: classes.delRoom,\n    onClick: handleDel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(DeleteIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })), props.roomManager && React.createElement(ProfileModal, {\n    customer: true,\n    name: props.booking.customer.first_name + \" \" + props.booking.customer.last_name,\n    username: props.booking.customer.username,\n    email: props.booking.customer.email,\n    imgLink: \"https://upload.wikimedia.org/wikipedia/commons/4/4e/Vilnius_view.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), props.customer && React.createElement(ProfileModal, {\n    roomManager: true,\n    name: props.booking.time_slot.room_id.owner.first_name + \" \" + props.booking.time_slot.room_id.owner.last_name,\n    username: props.booking.time_slot.room_id.owner.username,\n    email: props.booking.time_slot.room_id.owner.email,\n    imgLink: \"https://upload.wikimedia.org/wikipedia/commons/4/4e/Vilnius_view.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  })));\n}\n\nfunction pad(num, size) {\n  let s = num + \"\";\n\n  while (s.length < size) s = \"0\" + s;\n\n  return s;\n}\n\nfunction dateOk(s, curr) {\n  s = s.replace(\"-\", \"\").replace(\"-\", \"\");\n  let sn = parseInt(s),\n      d = new Date(),\n      now;\n  now = parseInt(pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2));\n  console.log(sn, now);\n  if (curr === \"upcoming\") return sn > now;else if (curr === \"past\") return sn < now;else if (curr === \"today\") return sn === now;else if (curr === \"all\") return true;\n}\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\nexport default function Bookings(props) {\n  let c = 0;\n\n  for (let i in props.rows) if (dateOk(props.rows[i].date, props.curr)) c++;\n\n  let title;\n  if (props.curr === \"upcoming\") title = \"Upcoming Bookings\";else if (props.curr === \"past\") title = \"Past Bookings\";else if (props.curr === \"today\") title = \"Today's Bookings\";else if (props.curr === \"new\") title = \"New Booking\";else if (props.curr === \"all\") title = \"All Bookings\";\n  const rows = props.rows;\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, title), React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, rows.map(row => {\n    if (dateOk(row.date, props.curr)) return React.createElement(RowComponent, {\n      roomManager: props.roomManager,\n      customer: props.customer,\n      curr: props.curr,\n      key: row.id,\n      booking: row,\n      setDel: props.setDel,\n      del: props.del,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    });\n    return null;\n  }), !c && React.createElement(Typography, {\n    color: \"textSecondary\",\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, \"No bookings to display!\")));\n}","map":{"version":3,"sources":["/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/customer/bookings.component.jsx"],"names":["React","makeStyles","Title","List","ListItem","FormHelperText","ListItemText","Paper","DeleteIcon","Grid","axios","reactLocalStorage","Typography","IconButton","Box","ProfileModal","useStyles","_","listPaper","width","padding","roomTitle","float","margin","roomName","marginRight","delRoom","transform","cursor","formatTime","s","n","parseInt","split","ampm","RowComponent","props","classes","handleDel","e","preventDefault","delete","baseUrl","booking","id","headers","Authorization","get","then","setDel","del","deletable","replace","sn","d","Date","now","pad","getFullYear","getMonth","getDate","textAlign","marginBottom","time_slot","room_id","name","date","time_from","marginTop","time_to","roomManager","customer","first_name","last_name","username","email","owner","num","size","length","dateOk","curr","console","log","process","env","REACT_APP_HOST_BASE_URL","Bookings","c","i","rows","title","map","row"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Title from \"../title.component\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport { FormHelperText, ListItemText, Paper } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Grid from \"@material-ui/core/Grid\";\nimport axios from \"axios\";\nimport { reactLocalStorage } from \"reactjs-localstorage\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport ProfileModal from \"../profile/profile-modal.component\";\n\nconst useStyles = makeStyles((_) => ({\n  listPaper: {\n    width: \"100%\",\n    padding: \"0 2%\",\n  },\n  roomTitle: {\n    float: \"left\",\n    margin: \"11px 10px\",\n  },\n  roomName: {\n    float: \"left\",\n    marginRight: \"10%\",\n  },\n  delRoom: {\n    float: \"right\",\n    margin: \"44px 0px 0 \",\n    transform: \"translateY(-50%)\",\n    cursor: \"pointer\",\n  },\n}));\n\nfunction formatTime(s) {\n  let n = parseInt(s.split(\":\")[0]),\n    ampm = \" AM\";\n  if (n > 12) {\n    n -= 12;\n    ampm = \" PM\";\n  }\n  return n + \":\" + s.split(\":\")[1] + ampm;\n}\n\nfunction RowComponent(props) {\n  const classes = useStyles();\n\n  const handleDel = (e) => {\n    e.preventDefault();\n    axios\n      .delete(baseUrl + \"/bookings/\" + props.booking.id, {\n        headers: { Authorization: \"token \" + reactLocalStorage.get(\"token\") },\n      })\n      .then((_) => {\n        props.setDel(!props.del);\n      });\n  };\n\n  const deletable = (s) => {\n    s = s.replace(\"-\", \"\").replace(\"-\", \"\");\n    let sn = parseInt(s),\n      d = new Date(),\n      now;\n    now = parseInt(\n      pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2)\n    );\n\n    return sn >= now;\n  };\n\n  return (\n    <ListItem>\n      <Paper className={classes.listPaper}>\n        <ListItemText className={classes.roomName}>\n          <Grid style={{ textAlign: \"center\" }}>\n            <h3 style={{ marginBottom: \"5px\" }}>\n              {props.booking.time_slot.room_id.name}\n            </h3>\n            <FormHelperText style={{ margin: \"2px\", textAlign: \"center\" }}>\n              Room\n            </FormHelperText>\n          </Grid>\n        </ListItemText>\n        <ListItemText className={classes.roomTitle}>\n          <Grid style={{ textAlign: \"center\" }}>\n            <h3 style={{ marginBottom: \"5px\" }}>{props.booking.date}</h3>\n          </Grid>\n        </ListItemText>\n        <ListItemText className={classes.roomTitle}>\n          <Grid style={{ textAlign: \"center\" }}>\n            <h3 style={{ marginBottom: \"5px\" }}>\n              {formatTime(props.booking.time_slot.time_from)}\n            </h3>\n          </Grid>\n        </ListItemText>\n        <Box\n          color=\"text.secondary\"\n          className={classes.roomTitle}\n          style={{ marginTop: \"19px\" }}\n        >\n          <h3>to</h3>\n        </Box>\n        <ListItemText className={classes.roomTitle}>\n          <Grid style={{ textAlign: \"center\" }}>\n            <h3 style={{ marginBottom: \"5px\" }}>\n              {formatTime(props.booking.time_slot.time_to)}\n            </h3>\n          </Grid>\n        </ListItemText>\n        {!props.roomManager && deletable(props.booking.date) && (\n          <IconButton className={classes.delRoom} onClick={handleDel}>\n            <DeleteIcon />\n          </IconButton>\n        )}\n        {props.roomManager && (\n          <ProfileModal\n            customer\n            name={\n              props.booking.customer.first_name +\n              \" \" +\n              props.booking.customer.last_name\n            }\n            username={props.booking.customer.username}\n            email={props.booking.customer.email}\n            imgLink=\"https://upload.wikimedia.org/wikipedia/commons/4/4e/Vilnius_view.jpg\"\n          />\n        )}\n        {props.customer && (\n          <ProfileModal\n            roomManager\n            name={\n              props.booking.time_slot.room_id.owner.first_name +\n              \" \" +\n              props.booking.time_slot.room_id.owner.last_name\n            }\n            username={props.booking.time_slot.room_id.owner.username}\n            email={props.booking.time_slot.room_id.owner.email}\n            imgLink=\"https://upload.wikimedia.org/wikipedia/commons/4/4e/Vilnius_view.jpg\"\n          />\n        )}\n      </Paper>\n    </ListItem>\n  );\n}\n\nfunction pad(num, size) {\n  let s = num + \"\";\n  while (s.length < size) s = \"0\" + s;\n  return s;\n}\n\nfunction dateOk(s, curr) {\n  s = s.replace(\"-\", \"\").replace(\"-\", \"\");\n  let sn = parseInt(s),\n    d = new Date(),\n    now;\n  now = parseInt(\n    pad(d.getFullYear(), 4) + pad(d.getMonth() + 1, 2) + pad(d.getDate(), 2)\n  );\n  console.log(sn, now);\n\n  if (curr === \"upcoming\") return sn > now;\n  else if (curr === \"past\") return sn < now;\n  else if (curr === \"today\") return sn === now;\n  else if (curr === \"all\") return true;\n}\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nexport default function Bookings(props) {\n  let c = 0;\n  for (let i in props.rows) if (dateOk(props.rows[i].date, props.curr)) c++;\n\n  let title;\n  if (props.curr === \"upcoming\") title = \"Upcoming Bookings\";\n  else if (props.curr === \"past\") title = \"Past Bookings\";\n  else if (props.curr === \"today\") title = \"Today's Bookings\";\n  else if (props.curr === \"new\") title = \"New Booking\";\n  else if (props.curr === \"all\") title = \"All Bookings\";\n  const rows = props.rows;\n  return (\n    <React.Fragment>\n      <Title>{title}</Title>\n\n      <List>\n        {rows.map((row) => {\n          if (dateOk(row.date, props.curr))\n            return (\n              <RowComponent\n                roomManager={props.roomManager}\n                customer={props.customer}\n                curr={props.curr}\n                key={row.id}\n                booking={row}\n                setDel={props.setDel}\n                del={props.del}\n              />\n            );\n          return null;\n        })}\n        {!c && (\n          <Typography color=\"textSecondary\" style={{ textAlign: \"center\" }}>\n            No bookings to display!\n          </Typography>\n        )}\n      </List>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}