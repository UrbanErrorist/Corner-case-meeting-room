{"ast":null,"code":"/* eslint consistent-this: 0 */\n// Timeout cached values\n\"use strict\";\n\nvar aFrom = require(\"es5-ext/array/from\"),\n    forEach = require(\"es5-ext/object/for-each\"),\n    nextTick = require(\"next-tick\"),\n    isPromise = require(\"is-promise\"),\n    timeout = require(\"timers-ext/valid-timeout\"),\n    extensions = require(\"../lib/registered-extensions\");\n\nvar noop = Function.prototype,\n    max = Math.max,\n    min = Math.min,\n    create = Object.create;\n\nextensions.maxAge = function (maxAge, conf, options) {\n  var timeouts, postfix, preFetchAge, preFetchTimeouts;\n  maxAge = timeout(maxAge);\n  if (!maxAge) return;\n  timeouts = create(null);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, function (id) {\n    timeouts[id] = setTimeout(function () {\n      conf.delete(id);\n    }, maxAge);\n    if (typeof timeouts[id].unref === \"function\") timeouts[id].unref();\n    if (!preFetchTimeouts) return;\n\n    if (preFetchTimeouts[id]) {\n      if (preFetchTimeouts[id] !== \"nextTick\") clearTimeout(preFetchTimeouts[id]);\n    }\n\n    preFetchTimeouts[id] = setTimeout(function () {\n      delete preFetchTimeouts[id];\n    }, preFetchAge);\n    if (typeof preFetchTimeouts[id].unref === \"function\") preFetchTimeouts[id].unref();\n  });\n  conf.on(\"delete\" + postfix, function (id) {\n    clearTimeout(timeouts[id]);\n    delete timeouts[id];\n    if (!preFetchTimeouts) return;\n    if (preFetchTimeouts[id] !== \"nextTick\") clearTimeout(preFetchTimeouts[id]);\n    delete preFetchTimeouts[id];\n  });\n\n  if (options.preFetch) {\n    if (options.preFetch === true || isNaN(options.preFetch)) {\n      preFetchAge = 0.333;\n    } else {\n      preFetchAge = max(min(Number(options.preFetch), 1), 0);\n    }\n\n    if (preFetchAge) {\n      preFetchTimeouts = {};\n      preFetchAge = (1 - preFetchAge) * maxAge;\n      conf.on(\"get\" + postfix, function (id, args, context) {\n        if (!preFetchTimeouts[id]) {\n          preFetchTimeouts[id] = \"nextTick\";\n          nextTick(function () {\n            var result;\n            if (preFetchTimeouts[id] !== \"nextTick\") return;\n            delete preFetchTimeouts[id];\n            conf.delete(id);\n\n            if (options.async) {\n              args = aFrom(args);\n              args.push(noop);\n            }\n\n            result = conf.memoized.apply(context, args);\n\n            if (options.promise) {\n              // Supress eventual error warnings\n              if (isPromise(result)) {\n                if (typeof result.done === \"function\") result.done(noop, noop);else result.then(noop, noop);\n              }\n            }\n          });\n        }\n      });\n    }\n  }\n\n  conf.on(\"clear\" + postfix, function () {\n    forEach(timeouts, function (id) {\n      clearTimeout(id);\n    });\n    timeouts = {};\n\n    if (preFetchTimeouts) {\n      forEach(preFetchTimeouts, function (id) {\n        if (id !== \"nextTick\") clearTimeout(id);\n      });\n      preFetchTimeouts = {};\n    }\n  });\n};","map":{"version":3,"sources":["/Users/blackhat/Desktop/testingRoom/src/frontend/node_modules/memoizee/ext/max-age.js"],"names":["aFrom","require","forEach","nextTick","isPromise","timeout","extensions","noop","Function","prototype","max","Math","min","create","Object","maxAge","conf","options","timeouts","postfix","preFetchAge","preFetchTimeouts","async","promise","on","id","setTimeout","delete","unref","clearTimeout","preFetch","isNaN","Number","args","context","result","push","memoized","apply","done","then"],"mappings":"AAAA;AAEA;AAEA;;AAEA,IAAIA,KAAK,GAAQC,OAAO,CAAC,oBAAD,CAAxB;AAAA,IACIC,OAAO,GAAMD,OAAO,CAAC,yBAAD,CADxB;AAAA,IAEIE,QAAQ,GAAKF,OAAO,CAAC,WAAD,CAFxB;AAAA,IAGIG,SAAS,GAAIH,OAAO,CAAC,YAAD,CAHxB;AAAA,IAIII,OAAO,GAAMJ,OAAO,CAAC,0BAAD,CAJxB;AAAA,IAKIK,UAAU,GAAGL,OAAO,CAAC,8BAAD,CALxB;;AAOA,IAAIM,IAAI,GAAGC,QAAQ,CAACC,SAApB;AAAA,IAA+BC,GAAG,GAAGC,IAAI,CAACD,GAA1C;AAAA,IAA+CE,GAAG,GAAGD,IAAI,CAACC,GAA1D;AAAA,IAA+DC,MAAM,GAAGC,MAAM,CAACD,MAA/E;;AAEAP,UAAU,CAACS,MAAX,GAAoB,UAAUA,MAAV,EAAkBC,IAAlB,EAAwBC,OAAxB,EAAiC;AACpD,MAAIC,QAAJ,EAAcC,OAAd,EAAuBC,WAAvB,EAAoCC,gBAApC;AAEAN,EAAAA,MAAM,GAAGV,OAAO,CAACU,MAAD,CAAhB;AACA,MAAI,CAACA,MAAL,EAAa;AAEbG,EAAAA,QAAQ,GAAGL,MAAM,CAAC,IAAD,CAAjB;AACAM,EAAAA,OAAO,GACLF,OAAO,CAACK,KAAR,IAAiBhB,UAAU,CAACgB,KAA7B,IAAwCL,OAAO,CAACM,OAAR,IAAmBjB,UAAU,CAACiB,OAAtE,GACG,OADH,GAEG,EAHJ;AAIAP,EAAAA,IAAI,CAACQ,EAAL,CAAQ,QAAQL,OAAhB,EAAyB,UAAUM,EAAV,EAAc;AACtCP,IAAAA,QAAQ,CAACO,EAAD,CAAR,GAAeC,UAAU,CAAC,YAAY;AAAEV,MAAAA,IAAI,CAACW,MAAL,CAAYF,EAAZ;AAAkB,KAAjC,EAAmCV,MAAnC,CAAzB;AACA,QAAI,OAAOG,QAAQ,CAACO,EAAD,CAAR,CAAaG,KAApB,KAA8B,UAAlC,EAA8CV,QAAQ,CAACO,EAAD,CAAR,CAAaG,KAAb;AAC9C,QAAI,CAACP,gBAAL,EAAuB;;AACvB,QAAIA,gBAAgB,CAACI,EAAD,CAApB,EAA0B;AACzB,UAAIJ,gBAAgB,CAACI,EAAD,CAAhB,KAAyB,UAA7B,EAAyCI,YAAY,CAACR,gBAAgB,CAACI,EAAD,CAAjB,CAAZ;AACzC;;AACDJ,IAAAA,gBAAgB,CAACI,EAAD,CAAhB,GAAuBC,UAAU,CAAC,YAAY;AAC7C,aAAOL,gBAAgB,CAACI,EAAD,CAAvB;AACA,KAFgC,EAE9BL,WAF8B,CAAjC;AAGA,QAAI,OAAOC,gBAAgB,CAACI,EAAD,CAAhB,CAAqBG,KAA5B,KAAsC,UAA1C,EAAsDP,gBAAgB,CAACI,EAAD,CAAhB,CAAqBG,KAArB;AACtD,GAXD;AAYAZ,EAAAA,IAAI,CAACQ,EAAL,CAAQ,WAAWL,OAAnB,EAA4B,UAAUM,EAAV,EAAc;AACzCI,IAAAA,YAAY,CAACX,QAAQ,CAACO,EAAD,CAAT,CAAZ;AACA,WAAOP,QAAQ,CAACO,EAAD,CAAf;AACA,QAAI,CAACJ,gBAAL,EAAuB;AACvB,QAAIA,gBAAgB,CAACI,EAAD,CAAhB,KAAyB,UAA7B,EAAyCI,YAAY,CAACR,gBAAgB,CAACI,EAAD,CAAjB,CAAZ;AACzC,WAAOJ,gBAAgB,CAACI,EAAD,CAAvB;AACA,GAND;;AAQA,MAAIR,OAAO,CAACa,QAAZ,EAAsB;AACrB,QAAIb,OAAO,CAACa,QAAR,KAAqB,IAArB,IAA6BC,KAAK,CAACd,OAAO,CAACa,QAAT,CAAtC,EAA0D;AACzDV,MAAAA,WAAW,GAAG,KAAd;AACA,KAFD,MAEO;AACNA,MAAAA,WAAW,GAAGV,GAAG,CAACE,GAAG,CAACoB,MAAM,CAACf,OAAO,CAACa,QAAT,CAAP,EAA2B,CAA3B,CAAJ,EAAmC,CAAnC,CAAjB;AACA;;AACD,QAAIV,WAAJ,EAAiB;AAChBC,MAAAA,gBAAgB,GAAG,EAAnB;AACAD,MAAAA,WAAW,GAAG,CAAC,IAAIA,WAAL,IAAoBL,MAAlC;AACAC,MAAAA,IAAI,CAACQ,EAAL,CAAQ,QAAQL,OAAhB,EAAyB,UAAUM,EAAV,EAAcQ,IAAd,EAAoBC,OAApB,EAA6B;AACrD,YAAI,CAACb,gBAAgB,CAACI,EAAD,CAArB,EAA2B;AAC1BJ,UAAAA,gBAAgB,CAACI,EAAD,CAAhB,GAAuB,UAAvB;AACAtB,UAAAA,QAAQ,CAAC,YAAY;AACpB,gBAAIgC,MAAJ;AACA,gBAAId,gBAAgB,CAACI,EAAD,CAAhB,KAAyB,UAA7B,EAAyC;AACzC,mBAAOJ,gBAAgB,CAACI,EAAD,CAAvB;AACAT,YAAAA,IAAI,CAACW,MAAL,CAAYF,EAAZ;;AACA,gBAAIR,OAAO,CAACK,KAAZ,EAAmB;AAClBW,cAAAA,IAAI,GAAGjC,KAAK,CAACiC,IAAD,CAAZ;AACAA,cAAAA,IAAI,CAACG,IAAL,CAAU7B,IAAV;AACA;;AACD4B,YAAAA,MAAM,GAAGnB,IAAI,CAACqB,QAAL,CAAcC,KAAd,CAAoBJ,OAApB,EAA6BD,IAA7B,CAAT;;AACA,gBAAIhB,OAAO,CAACM,OAAZ,EAAqB;AACpB;AACA,kBAAInB,SAAS,CAAC+B,MAAD,CAAb,EAAuB;AACtB,oBAAI,OAAOA,MAAM,CAACI,IAAd,KAAuB,UAA3B,EAAuCJ,MAAM,CAACI,IAAP,CAAYhC,IAAZ,EAAkBA,IAAlB,EAAvC,KACK4B,MAAM,CAACK,IAAP,CAAYjC,IAAZ,EAAkBA,IAAlB;AACL;AACD;AACD,WAjBO,CAAR;AAkBA;AACD,OAtBD;AAuBA;AACD;;AAEDS,EAAAA,IAAI,CAACQ,EAAL,CAAQ,UAAUL,OAAlB,EAA2B,YAAY;AACtCjB,IAAAA,OAAO,CAACgB,QAAD,EAAW,UAAUO,EAAV,EAAc;AAAEI,MAAAA,YAAY,CAACJ,EAAD,CAAZ;AAAmB,KAA9C,CAAP;AACAP,IAAAA,QAAQ,GAAG,EAAX;;AACA,QAAIG,gBAAJ,EAAsB;AACrBnB,MAAAA,OAAO,CAACmB,gBAAD,EAAmB,UAAUI,EAAV,EAAc;AAAE,YAAIA,EAAE,KAAK,UAAX,EAAuBI,YAAY,CAACJ,EAAD,CAAZ;AAAmB,OAA7E,CAAP;AACAJ,MAAAA,gBAAgB,GAAG,EAAnB;AACA;AACD,GAPD;AAQA,CA1ED","sourcesContent":["/* eslint consistent-this: 0 */\n\n// Timeout cached values\n\n\"use strict\";\n\nvar aFrom      = require(\"es5-ext/array/from\")\n  , forEach    = require(\"es5-ext/object/for-each\")\n  , nextTick   = require(\"next-tick\")\n  , isPromise  = require(\"is-promise\")\n  , timeout    = require(\"timers-ext/valid-timeout\")\n  , extensions = require(\"../lib/registered-extensions\");\n\nvar noop = Function.prototype, max = Math.max, min = Math.min, create = Object.create;\n\nextensions.maxAge = function (maxAge, conf, options) {\n\tvar timeouts, postfix, preFetchAge, preFetchTimeouts;\n\n\tmaxAge = timeout(maxAge);\n\tif (!maxAge) return;\n\n\ttimeouts = create(null);\n\tpostfix =\n\t\t(options.async && extensions.async) || (options.promise && extensions.promise)\n\t\t\t? \"async\"\n\t\t\t: \"\";\n\tconf.on(\"set\" + postfix, function (id) {\n\t\ttimeouts[id] = setTimeout(function () { conf.delete(id); }, maxAge);\n\t\tif (typeof timeouts[id].unref === \"function\") timeouts[id].unref();\n\t\tif (!preFetchTimeouts) return;\n\t\tif (preFetchTimeouts[id]) {\n\t\t\tif (preFetchTimeouts[id] !== \"nextTick\") clearTimeout(preFetchTimeouts[id]);\n\t\t}\n\t\tpreFetchTimeouts[id] = setTimeout(function () {\n\t\t\tdelete preFetchTimeouts[id];\n\t\t}, preFetchAge);\n\t\tif (typeof preFetchTimeouts[id].unref === \"function\") preFetchTimeouts[id].unref();\n\t});\n\tconf.on(\"delete\" + postfix, function (id) {\n\t\tclearTimeout(timeouts[id]);\n\t\tdelete timeouts[id];\n\t\tif (!preFetchTimeouts) return;\n\t\tif (preFetchTimeouts[id] !== \"nextTick\") clearTimeout(preFetchTimeouts[id]);\n\t\tdelete preFetchTimeouts[id];\n\t});\n\n\tif (options.preFetch) {\n\t\tif (options.preFetch === true || isNaN(options.preFetch)) {\n\t\t\tpreFetchAge = 0.333;\n\t\t} else {\n\t\t\tpreFetchAge = max(min(Number(options.preFetch), 1), 0);\n\t\t}\n\t\tif (preFetchAge) {\n\t\t\tpreFetchTimeouts = {};\n\t\t\tpreFetchAge = (1 - preFetchAge) * maxAge;\n\t\t\tconf.on(\"get\" + postfix, function (id, args, context) {\n\t\t\t\tif (!preFetchTimeouts[id]) {\n\t\t\t\t\tpreFetchTimeouts[id] = \"nextTick\";\n\t\t\t\t\tnextTick(function () {\n\t\t\t\t\t\tvar result;\n\t\t\t\t\t\tif (preFetchTimeouts[id] !== \"nextTick\") return;\n\t\t\t\t\t\tdelete preFetchTimeouts[id];\n\t\t\t\t\t\tconf.delete(id);\n\t\t\t\t\t\tif (options.async) {\n\t\t\t\t\t\t\targs = aFrom(args);\n\t\t\t\t\t\t\targs.push(noop);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult = conf.memoized.apply(context, args);\n\t\t\t\t\t\tif (options.promise) {\n\t\t\t\t\t\t\t// Supress eventual error warnings\n\t\t\t\t\t\t\tif (isPromise(result)) {\n\t\t\t\t\t\t\t\tif (typeof result.done === \"function\") result.done(noop, noop);\n\t\t\t\t\t\t\t\telse result.then(noop, noop);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tconf.on(\"clear\" + postfix, function () {\n\t\tforEach(timeouts, function (id) { clearTimeout(id); });\n\t\ttimeouts = {};\n\t\tif (preFetchTimeouts) {\n\t\t\tforEach(preFetchTimeouts, function (id) { if (id !== \"nextTick\") clearTimeout(id); });\n\t\t\tpreFetchTimeouts = {};\n\t\t}\n\t});\n};\n"]},"metadata":{},"sourceType":"script"}