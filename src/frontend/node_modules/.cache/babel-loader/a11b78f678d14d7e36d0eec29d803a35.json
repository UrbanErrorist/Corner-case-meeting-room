{"ast":null,"code":"// Simple typographical replacements\n//\n'use strict'; // TODO:\n// - fractionals 1/2, 1/4, 3/4 -> ½, ¼, ¾\n// - miltiplication 2 x 4 -> 2 × 4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  'c': '©',\n  'r': '®',\n  'p': '§',\n  'tm': '™'\n};\n\nfunction replaceScopedAbbr(str) {\n  if (str.indexOf('(') < 0) {\n    return str;\n  }\n\n  return str.replace(SCOPED_ABBR_RE, function (match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  });\n}\n\nmodule.exports = function replace(state) {\n  var i, token, text, inlineTokens, blkIdx;\n\n  if (!state.options.typographer) {\n    return;\n  }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n    if (state.tokens[blkIdx].type !== 'inline') {\n      continue;\n    }\n\n    inlineTokens = state.tokens[blkIdx].children;\n\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n\n      if (token.type === 'text') {\n        text = token.content;\n        text = replaceScopedAbbr(text);\n\n        if (RARE_RE.test(text)) {\n          text = text.replace(/\\+-/g, '±') // .., ..., ....... -> …\n          // but ?..... & !..... -> ?.. & !..\n          .replace(/\\.{2,}/g, '…').replace(/([?!])…/g, '$1..').replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',') // em-dash\n          .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2') // en-dash\n          .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2').replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n\n        token.content = text;\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/blackhat/TV Shows/Meeting Room/src/frontend/node_modules/remarkable/lib/rules_core/replacements.js"],"names":["RARE_RE","SCOPED_ABBR_RE","SCOPED_ABBR","replaceScopedAbbr","str","indexOf","replace","match","name","toLowerCase","module","exports","state","i","token","text","inlineTokens","blkIdx","options","typographer","tokens","length","type","children","content","test"],"mappings":"AAAA;AACA;AACA,a,CAEA;AACA;AACA;;AAEA,IAAIA,OAAO,GAAG,8BAAd;AAEA,IAAIC,cAAc,GAAG,kBAArB;AACA,IAAIC,WAAW,GAAG;AAChB,OAAK,GADW;AAEhB,OAAK,GAFW;AAGhB,OAAK,GAHW;AAIhB,QAAM;AAJU,CAAlB;;AAOA,SAASC,iBAAT,CAA2BC,GAA3B,EAAgC;AAC9B,MAAIA,GAAG,CAACC,OAAJ,CAAY,GAAZ,IAAmB,CAAvB,EAA0B;AAAE,WAAOD,GAAP;AAAa;;AAEzC,SAAOA,GAAG,CAACE,OAAJ,CAAYL,cAAZ,EAA4B,UAASM,KAAT,EAAgBC,IAAhB,EAAsB;AACvD,WAAON,WAAW,CAACM,IAAI,CAACC,WAAL,EAAD,CAAlB;AACD,GAFM,CAAP;AAGD;;AAGDC,MAAM,CAACC,OAAP,GAAiB,SAASL,OAAT,CAAiBM,KAAjB,EAAwB;AACvC,MAAIC,CAAJ,EAAOC,KAAP,EAAcC,IAAd,EAAoBC,YAApB,EAAkCC,MAAlC;;AAEA,MAAI,CAACL,KAAK,CAACM,OAAN,CAAcC,WAAnB,EAAgC;AAAE;AAAS;;AAE3C,OAAKF,MAAM,GAAGL,KAAK,CAACQ,MAAN,CAAaC,MAAb,GAAsB,CAApC,EAAuCJ,MAAM,IAAI,CAAjD,EAAoDA,MAAM,EAA1D,EAA8D;AAE5D,QAAIL,KAAK,CAACQ,MAAN,CAAaH,MAAb,EAAqBK,IAArB,KAA8B,QAAlC,EAA4C;AAAE;AAAW;;AAEzDN,IAAAA,YAAY,GAAGJ,KAAK,CAACQ,MAAN,CAAaH,MAAb,EAAqBM,QAApC;;AAEA,SAAKV,CAAC,GAAGG,YAAY,CAACK,MAAb,GAAsB,CAA/B,EAAkCR,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7CC,MAAAA,KAAK,GAAGE,YAAY,CAACH,CAAD,CAApB;;AACA,UAAIC,KAAK,CAACQ,IAAN,KAAe,MAAnB,EAA2B;AACzBP,QAAAA,IAAI,GAAGD,KAAK,CAACU,OAAb;AAEAT,QAAAA,IAAI,GAAGZ,iBAAiB,CAACY,IAAD,CAAxB;;AAEA,YAAIf,OAAO,CAACyB,IAAR,CAAaV,IAAb,CAAJ,EAAwB;AACtBA,UAAAA,IAAI,GAAGA,IAAI,CACRT,OADI,CACI,MADJ,EACY,GADZ,EAEL;AACA;AAHK,WAIJA,OAJI,CAII,SAJJ,EAIe,GAJf,EAIoBA,OAJpB,CAI4B,UAJ5B,EAIwC,MAJxC,EAKJA,OALI,CAKI,aALJ,EAKmB,QALnB,EAK6BA,OAL7B,CAKqC,QALrC,EAK+C,GAL/C,EAML;AANK,WAOJA,OAPI,CAOI,uBAPJ,EAO6B,YAP7B,EAQL;AARK,WASJA,OATI,CASI,kBATJ,EASwB,YATxB,EAUJA,OAVI,CAUI,0BAVJ,EAUgC,YAVhC,CAAP;AAWD;;AAEDQ,QAAAA,KAAK,CAACU,OAAN,GAAgBT,IAAhB;AACD;AACF;AACF;AACF,CApCD","sourcesContent":["// Simple typographical replacements\n//\n'use strict';\n\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> ½, ¼, ¾\n// - miltiplication 2 x 4 -> 2 × 4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  'c': '©',\n  'r': '®',\n  'p': '§',\n  'tm': '™'\n};\n\nfunction replaceScopedAbbr(str) {\n  if (str.indexOf('(') < 0) { return str; }\n\n  return str.replace(SCOPED_ABBR_RE, function(match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  });\n}\n\n\nmodule.exports = function replace(state) {\n  var i, token, text, inlineTokens, blkIdx;\n\n  if (!state.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    inlineTokens = state.tokens[blkIdx].children;\n\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text') {\n        text = token.content;\n\n        text = replaceScopedAbbr(text);\n\n        if (RARE_RE.test(text)) {\n          text = text\n            .replace(/\\+-/g, '±')\n            // .., ..., ....... -> …\n            // but ?..... & !..... -> ?.. & !..\n            .replace(/\\.{2,}/g, '…').replace(/([?!])…/g, '$1..')\n            .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n            // em-dash\n            .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2')\n            // en-dash\n            .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2')\n            .replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n\n        token.content = text;\n      }\n    }\n  }\n};\n"]},"metadata":{},"sourceType":"script"}