{"ast":null,"code":"var _jsxFileName = \"/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/profile/manage-profile-page.component.jsx\";\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport TextField from \"@material-ui/core/TextField\";\nimport validator from \"validator\";\nimport axios from \"axios\";\nimport * as qs from \"qs\";\nimport { reactLocalStorage } from \"reactjs-localstorage\";\nimport { FormHelperText } from \"@material-ui/core\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: '100px'\n  },\n  icon: {\n    marginRight: theme.spacing(2)\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6)\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4)\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8)\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  cardMedia: {\n    paddingTop: '56.25%' // 16:9\n\n  },\n  cardContent: {\n    flexGrow: 1\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  }\n}));\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fnameChange = e => {\n      e.preventDefault();\n      this.setState({\n        fname: e.target.value\n      });\n      console.log(e.target.value);\n      if (!(e.target.value.toString().length >= 3)) this.setState({\n        validFname: false\n      });else this.setState({\n        validFname: true\n      });\n    };\n\n    this.lnameChange = e => {\n      e.preventDefault();\n      this.setState({\n        lname: e.target.value\n      });\n      console.log(e.target.value);\n      if (!(e.target.value.toString().length >= 3)) this.setState({\n        validLname: false\n      });else this.setState({\n        validLname: true\n      });\n    };\n\n    this.emailChange = e => {\n      e.preventDefault();\n      this.setState({\n        email: e.target.value\n      });\n      console.log(e.target.value);\n      if (!validator.isEmail(e.target.value)) this.setState({\n        validEmail: false\n      });else this.setState({\n        validEmail: true\n      });\n    };\n\n    this.pwdChange = e => {\n      e.preventDefault();\n      this.setState({\n        pwd: e.target.value\n      });\n      console.log(e.target.value);\n      if (!(e.target.value.toString().length >= 8)) this.setState({\n        validPwd: false\n      });else this.setState({\n        validPwd: true\n      });\n    };\n\n    this.pwdConfChange = e => {\n      e.preventDefault();\n      this.setState({\n        pwdConf: e.target.value\n      });\n      console.log(e.target.value);\n      if (!(e.target.value.toString() === this.state.pwd)) this.setState({\n        validPwdConf: false\n      });else this.setState({\n        validPwdConf: true\n      });\n    };\n\n    this.usernameChange = e => {\n      e.preventDefault();\n      this.setState({\n        username: e.target.value\n      });\n      console.log(e.target.value);\n      if (!(e.target.value.toString().length >= 5)) this.setState({\n        validUsername: false\n      });else this.setState({\n        validUsername: true\n      });\n    };\n\n    this.submit = e => {\n      e.preventDefault(); // Fname\n\n      if (!(this.state.fname.toString().length >= 3)) this.setState({\n        validFname: false\n      });else this.setState({\n        validFname: true\n      }); // Lname\n\n      if (!(this.state.lname.toString().length >= 3)) this.setState({\n        validLname: false\n      });else this.setState({\n        validLname: true\n      }); // Username\n\n      if (!(this.state.username.toString().length >= 5)) this.setState({\n        validUsername: false\n      });else this.setState({\n        validUsername: true\n      }); // Email\n\n      if (!validator.isEmail(this.state.email)) this.setState({\n        validEmail: false\n      });else this.setState({\n        validEmail: true\n      }); // Pwd\n\n      if (!(this.state.pwd.toString().length >= 8 || this.state.pwd.toString().length === 0)) this.setState({\n        validPwd: false\n      });else this.setState({\n        validPwd: true\n      }); // Confirm pwd\n\n      if (!(this.state.pwdConf === this.state.pwd)) this.setState({\n        validPwdConf: false\n      });else this.setState({\n        validPwdConf: true\n      }); // Role\n\n      if (!(this.state.role.toString().length > 0)) this.setState({\n        validRole: false\n      });else this.setState({\n        validRole: true\n      });\n\n      if (this.state.validFname && this.state.validLname && this.state.validUsername && this.state.validEmail && this.state.validPwd && this.state.validPwdConf) {\n        let data = {};\n        if (this.state.fname.toString().length !== 0) data.first_name = this.state.fname;\n        if (this.state.lname.toString().length !== 0) data.last_name = this.state.lname;\n        if (this.state.username.toString().length !== 0) data.username = this.state.username;\n        if (this.state.email.toString().length !== 0) data.email = this.state.email;\n        if (this.state.pwd.toString().length !== 0) data.pwd = this.state.pwd;\n        const config = {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Authorization': 'token ' + reactLocalStorage.get('token')\n          }\n        };\n        console.log(JSON.stringify(data));\n        axios.patch(baseUrl + '/profile', qs.stringify(data), config).then(res => {\n          console.log(res);\n          this.setState({\n            edit: false\n          }); // this.props.history.replace('/login');\n        }).catch(error => {\n          if (!error.response) {\n            // network error\n            console.log('Error: Network Error\\n' + error);\n          } else {\n            let err = '';\n            let data = error.response.data;\n\n            for (let d in data) for (let i in data[d]) err += data[d][i];\n\n            this.setState({\n              errorText: err\n            });\n          }\n        });\n      }\n    };\n\n    this.handleLogout = () => {\n      this.props.setAuth(false);\n      reactLocalStorage.remove('token');\n      reactLocalStorage.remove('role');\n      this.props.history.replace('/');\n    };\n\n    this.state = {\n      edit: false,\n      fname: \"\",\n      lname: \"\",\n      username: \"\",\n      email: \"\",\n      pwd: \"\",\n      pwdConf: \"\",\n      role: \"\",\n      validFname: true,\n      validLname: true,\n      validUsername: true,\n      validEmail: true,\n      validPwd: true,\n      validPwdConf: true,\n      validRole: false,\n      errorText: ''\n    };\n  }\n\n  componentDidMount() {\n    axios.get(baseUrl + '/profile', {\n      headers: {\n        'Authorization': 'token ' + reactLocalStorage.get('token')\n      }\n    }).then(res => {\n      this.setState({\n        username: res.data.username,\n        fname: res.data.first_name,\n        lname: res.data.last_name,\n        email: res.data.email\n      });\n    }).catch(error => {\n      if (!error.response) {\n        // network error\n        console.log('Error: Network Error\\n' + error);\n      } else {\n        console.log(error.response.data.message);\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.state.edit && React.createElement(\"form\", {\n      className: this.props.classes.form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validFname,\n      autoComplete: \"fname\",\n      name: \"firstName\",\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      id: \"firstName\",\n      label: \"First Name\",\n      onChange: this.fnameChange,\n      defaultValue: this.state.fname,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validLname,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      id: \"lastName\",\n      label: \"Last Name\",\n      name: \"lastName\",\n      autoComplete: \"lname\",\n      onChange: this.lnameChange,\n      defaultValue: this.state.lname,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validUsername,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      id: \"username\",\n      label: \"Username\",\n      name: \"username\",\n      autoComplete: \"username\",\n      onChange: this.usernameChange,\n      defaultValue: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validEmail,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      id: \"email\",\n      label: \"Email Address\",\n      name: \"email\",\n      autoComplete: \"email\",\n      onChange: this.emailChange,\n      defaultValue: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validPwd,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"Password\",\n      type: \"password\",\n      id: \"password\",\n      autoComplete: \"off\",\n      onChange: this.pwdChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: !this.state.validPwdConf,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      name: \"conf-password\",\n      label: \"Confirm Password\",\n      type: \"password\",\n      id: \"conf-password\",\n      autoComplete: \"off\",\n      onChange: this.pwdConfChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(FormHelperText, {\n      error: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, this.state.errorText), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    })))), !this.state.edit && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      component: \"h2\",\n      variant: \"h4\",\n      align: \"center\",\n      color: \"textPrimary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, this.state.fname, \" \", this.state.lname), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      component: \"h4\",\n      variant: \"h5\",\n      align: \"center\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, this.state.username), React.createElement(Typography, {\n      component: \"h4\",\n      variant: \"h5\",\n      align: \"center\",\n      color: \"textSecondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, this.state.email)), React.createElement(\"div\", {\n      className: this.props.classes.heroButtons,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      justify: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, this.state.edit && React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, \"Save Changes\"), !this.state.edit && React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => {\n        this.setState({\n          edit: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, \"Edit Profile\")), React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outlined\",\n      color: \"primary\",\n      onClick: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, \"Logout\")))));\n  }\n\n}\n\nexport default function Home(props) {\n  const classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382\n    },\n    __self: this\n  }), React.createElement(\"main\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.heroContent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384\n    },\n    __self: this\n  }, React.createElement(Container, {\n    maxWidth: \"sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h2\",\n    align: \"center\",\n    color: \"textPrimary\",\n    gutterBottom: true,\n    style: {\n      marginBottom: '50px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386\n    },\n    __self: this\n  }, \"User Profile\"), React.createElement(Form, {\n    classes: classes,\n    setAuth: props.setAuth,\n    history: props.history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390\n    },\n    __self: this\n  })))));\n}","map":{"version":3,"sources":["/Users/blackhat/TV Shows/Meeting Room/src/frontend/src/components/profile/manage-profile-page.component.jsx"],"names":["React","Button","CssBaseline","Grid","Typography","makeStyles","Container","TextField","validator","axios","qs","reactLocalStorage","FormHelperText","useStyles","theme","root","marginTop","icon","marginRight","spacing","heroContent","backgroundColor","palette","background","paper","padding","heroButtons","cardGrid","paddingTop","paddingBottom","card","height","display","flexDirection","cardMedia","cardContent","flexGrow","form","width","baseUrl","process","env","REACT_APP_HOST_BASE_URL","Form","Component","constructor","props","fnameChange","e","preventDefault","setState","fname","target","value","console","log","toString","length","validFname","lnameChange","lname","validLname","emailChange","email","isEmail","validEmail","pwdChange","pwd","validPwd","pwdConfChange","pwdConf","state","validPwdConf","usernameChange","username","validUsername","submit","role","validRole","data","first_name","last_name","config","headers","get","JSON","stringify","patch","then","res","edit","catch","error","response","err","d","i","errorText","handleLogout","setAuth","remove","history","replace","componentDidMount","message","render","classes","Home","marginBottom"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport TextField from \"@material-ui/core/TextField\";\nimport validator from \"validator\";\nimport axios from \"axios\";\nimport * as qs from \"qs\";\nimport {reactLocalStorage} from \"reactjs-localstorage\";\nimport {FormHelperText} from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginTop: '100px'\n    },\n    icon: {\n        marginRight: theme.spacing(2),\n    },\n    heroContent: {\n        backgroundColor: theme.palette.background.paper,\n        padding: theme.spacing(8, 0, 6),\n    },\n    heroButtons: {\n        marginTop: theme.spacing(4),\n    },\n    cardGrid: {\n        paddingTop: theme.spacing(8),\n        paddingBottom: theme.spacing(8),\n    },\n    card: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    cardMedia: {\n        paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n        flexGrow: 1,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(3),\n    },\n}));\n\nconst baseUrl = `${process.env.REACT_APP_HOST_BASE_URL}`;\n\n\nclass Form extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            edit: false,\n            fname: \"\",\n            lname: \"\",\n            username: \"\",\n            email: \"\",\n            pwd: \"\",\n            pwdConf: \"\",\n            role: \"\",\n            validFname: true,\n            validLname: true,\n            validUsername: true,\n            validEmail: true,\n            validPwd: true,\n            validPwdConf: true,\n            validRole: false,\n            errorText: ''\n        }\n    }\n\n    fnameChange = (e) => {\n        e.preventDefault();\n        this.setState({fname: e.target.value});\n        console.log(e.target.value);\n        if (!(e.target.value.toString().length >= 3))\n            this.setState({validFname: false});\n        else\n            this.setState({validFname: true})\n    };\n\n    lnameChange = (e) => {\n        e.preventDefault();\n        this.setState({lname: e.target.value});\n        console.log(e.target.value);\n        if (!(e.target.value.toString().length >= 3))\n            this.setState({validLname: false});\n        else\n            this.setState({validLname: true})\n    };\n\n    emailChange = (e) => {\n        e.preventDefault();\n        this.setState({email: e.target.value});\n        console.log(e.target.value);\n        if (!validator.isEmail(e.target.value))\n            this.setState({validEmail: false});\n        else\n            this.setState({validEmail: true})\n    };\n\n    pwdChange = (e) => {\n        e.preventDefault();\n        this.setState({pwd: e.target.value});\n        console.log(e.target.value);\n        if (!(e.target.value.toString().length >= 8))\n            this.setState({validPwd: false});\n        else\n            this.setState({validPwd: true})\n    };\n\n    pwdConfChange = (e) => {\n        e.preventDefault();\n        this.setState({pwdConf: e.target.value});\n        console.log(e.target.value);\n        if (!(e.target.value.toString() === this.state.pwd))\n            this.setState({validPwdConf: false});\n        else\n            this.setState({validPwdConf: true})\n    };\n\n    usernameChange = (e) => {\n        e.preventDefault();\n        this.setState({username: e.target.value});\n        console.log(e.target.value);\n        if (!(e.target.value.toString().length >= 5))\n            this.setState({validUsername: false});\n        else\n            this.setState({validUsername: true})\n    };\n\n    submit = (e) => {\n        e.preventDefault();\n        // Fname\n        if (!(this.state.fname.toString().length >= 3))\n            this.setState({validFname: false});\n        else\n            this.setState({validFname: true});\n\n        // Lname\n        if (!(this.state.lname.toString().length >= 3))\n            this.setState({validLname: false});\n        else\n            this.setState({validLname: true});\n\n        // Username\n        if (!(this.state.username.toString().length >= 5))\n            this.setState({validUsername: false});\n        else\n            this.setState({validUsername: true});\n\n        // Email\n        if (!validator.isEmail(this.state.email))\n            this.setState({validEmail: false});\n        else\n            this.setState({validEmail: true});\n\n        // Pwd\n        if (!(this.state.pwd.toString().length >= 8 || this.state.pwd.toString().length === 0))\n            this.setState({validPwd: false});\n        else\n            this.setState({validPwd: true});\n\n        // Confirm pwd\n        if (!(this.state.pwdConf === this.state.pwd))\n            this.setState({validPwdConf: false});\n        else\n            this.setState({validPwdConf: true});\n\n        // Role\n        if (!(this.state.role.toString().length > 0))\n            this.setState({validRole: false});\n        else\n            this.setState({validRole: true});\n\n        if (this.state.validFname && this.state.validLname && this.state.validUsername && this.state.validEmail && this.state.validPwd && this.state.validPwdConf) {\n            let data = {};\n\n            if (this.state.fname.toString().length !== 0)\n                data.first_name = this.state.fname;\n            if (this.state.lname.toString().length !== 0)\n                data.last_name = this.state.lname;\n            if (this.state.username.toString().length !== 0)\n                data.username = this.state.username;\n            if (this.state.email.toString().length !== 0)\n                data.email = this.state.email;\n            if (this.state.pwd.toString().length !== 0)\n                data.pwd = this.state.pwd;\n\n            const config = {\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                    'Authorization': 'token ' + reactLocalStorage.get('token')\n                }\n            };\n            console.log(JSON.stringify(data));\n            axios.patch(baseUrl + '/profile', qs.stringify(data), config).then(res => {\n                console.log(res);\n                this.setState({edit: false});\n                // this.props.history.replace('/login');\n            }).catch(error => {\n                if (!error.response) {\n                    // network error\n                    console.log('Error: Network Error\\n' + error);\n                } else {\n                    let err = '';\n                    let data = error.response.data;\n                    for (let d in data)\n                        for (let i in data[d])\n                            err += data[d][i];\n                    this.setState({errorText: err})\n                }\n            })\n        }\n    };\n\n    componentDidMount() {\n        axios.get(baseUrl + '/profile', {headers: {'Authorization': 'token ' + reactLocalStorage.get('token')}}).then((res) => {\n            this.setState({\n                username: res.data.username,\n                fname: res.data.first_name,\n                lname: res.data.last_name,\n                email: res.data.email,\n            })\n        }).catch(error => {\n            if (!error.response) {\n                // network error\n                console.log('Error: Network Error\\n' + error);\n            } else {\n                console.log(error.response.data.message);\n            }\n        })\n    }\n\n    handleLogout = () => {\n        this.props.setAuth(false);\n        reactLocalStorage.remove('token');\n        reactLocalStorage.remove('role');\n        this.props.history.replace('/');\n    };\n\n    render() {\n        return (\n            <div>\n                {this.state.edit && <form className={this.props.classes.form}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={12} sm={6}>\n                            <TextField\n                                error={!this.state.validFname}\n                                autoComplete=\"fname\"\n                                name=\"firstName\"\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"firstName\"\n                                label=\"First Name\"\n                                onChange={this.fnameChange}\n                                defaultValue={this.state.fname}\n                            />\n                        </Grid>\n                        <Grid item xs={12} sm={6}>\n                            <TextField\n                                error={!this.state.validLname}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"lastName\"\n                                label=\"Last Name\"\n                                name=\"lastName\"\n                                autoComplete=\"lname\"\n                                onChange={this.lnameChange}\n                                defaultValue={this.state.lname}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validUsername}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"username\"\n                                label=\"Username\"\n                                name=\"username\"\n                                autoComplete=\"username\"\n                                onChange={this.usernameChange}\n                                defaultValue={this.state.username}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validEmail}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                id=\"email\"\n                                label=\"Email Address\"\n                                name=\"email\"\n                                autoComplete=\"email\"\n                                onChange={this.emailChange}\n                                defaultValue={this.state.email}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validPwd}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                name=\"password\"\n                                label=\"Password\"\n                                type=\"password\"\n                                id=\"password\"\n                                autoComplete=\"off\"\n                                onChange={this.pwdChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={!this.state.validPwdConf}\n                                variant=\"outlined\"\n                                required\n                                fullWidth\n                                name=\"conf-password\"\n                                label=\"Confirm Password\"\n                                type=\"password\"\n                                id=\"conf-password\"\n                                autoComplete=\"off\"\n                                onChange={this.pwdConfChange}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <FormHelperText error>{this.state.errorText}</FormHelperText><br/>\n                        </Grid>\n                    </Grid>\n                </form>}\n                {!this.state.edit && <div>\n                    <Typography component=\"h2\" variant=\"h4\" align=\"center\" color=\"textPrimary\">\n                        {this.state.fname} {this.state.lname}\n                    </Typography><br/>\n                    <Typography component=\"h4\" variant=\"h5\" align=\"center\" color=\"textSecondary\">\n                        {this.state.username}\n                    </Typography>\n                    <Typography component=\"h4\" variant=\"h5\" align=\"center\" color=\"textSecondary\">\n                        {this.state.email}\n                    </Typography>\n                </div>}\n                <div className={this.props.classes.heroButtons}>\n                    <Grid container spacing={2} justify=\"center\">\n                        <Grid item>\n                            {this.state.edit && <Button variant=\"contained\" color=\"primary\" onClick={this.submit}>\n                                Save Changes\n                            </Button>}\n                            {!this.state.edit && <Button variant=\"contained\" color=\"primary\" onClick={() => {\n                                this.setState({edit: true})\n                            }}>\n                                Edit Profile\n                            </Button>}\n                        </Grid>\n                        <Grid item>\n                            <Button variant=\"outlined\" color=\"primary\" onClick={this.handleLogout}>\n                                Logout\n                            </Button>\n                        </Grid>\n                    </Grid>\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default function Home(props) {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <main>\n                <div className={classes.heroContent}>\n                    <Container maxWidth=\"sm\">\n                        <Typography component=\"h1\" variant=\"h2\" align=\"center\" color=\"textPrimary\" gutterBottom\n                                    style={{marginBottom: '50px'}}>\n                            User Profile\n                        </Typography>\n                        <Form classes={classes} setAuth={props.setAuth} history={props.history}/>\n\n                    </Container>\n                </div>\n\n            </main>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}